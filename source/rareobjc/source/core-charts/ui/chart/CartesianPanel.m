//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Code/Dev/appNativa/source/rareobjc/../rare/core-charts/com/appnativa/rare/ui/chart/CartesianPanel.java
//
//  Created by decoteaud on 3/11/16.
//

#include "com/appnativa/rare/Platform.h"
#include "com/appnativa/rare/platform/PlatformHelper.h"
#include "com/appnativa/rare/ui/ColorUtils.h"
#include "com/appnativa/rare/ui/Container.h"
#include "com/appnativa/rare/ui/UIColor.h"
#include "com/appnativa/rare/ui/UIFont.h"
#include "com/appnativa/rare/ui/aComponent.h"
#include "com/appnativa/rare/ui/chart/CartesianPanel.h"
#include "com/appnativa/rare/ui/iActionComponent.h"
#include "com/appnativa/rare/ui/iPlatformGraphics.h"

@implementation RARECartesianPanel

- (id)init {
  if (self = [super init]) {
    label_ = [RAREaPlatformHelper createLabelWithRAREiPlatformComponent:self];
    [((id<RAREiActionComponent>) nil_chk(label_)) setTextWithJavaLangCharSequence:[NSString stringWithFormat:@"<html><center>%@</center></html>", [RAREPlatform getResourceAsStringWithNSString:@"Rare.runtime.text.noCharts"]]];
    [label_ setForegroundWithRAREUIColor:[RAREColorUtils getForeground]];
    [self addWithRAREiPlatformComponent:label_];
  }
  return self;
}

- (void)setBoundsWithFloat:(float)x
                 withFloat:(float)y
                 withFloat:(float)w
                 withFloat:(float)h {
  [super setBoundsWithFloat:x withFloat:y withFloat:w withFloat:h];
  [((id<RAREiActionComponent>) nil_chk(label_)) setBoundsWithFloat:0 withFloat:0 withFloat:w withFloat:h];
}

- (void)setFontWithRAREUIFont:(RAREUIFont *)f {
  [super setFontWithRAREUIFont:f];
  if (f != nil) {
    [((id<RAREiActionComponent>) nil_chk(label_)) setFontWithRAREUIFont:f];
    ;
  }
}

- (void)setForegroundWithRAREUIColor:(RAREUIColor *)fg {
  [super setForegroundWithRAREUIColor:fg];
  if (fg != nil) {
    [((id<RAREiActionComponent>) nil_chk(label_)) setForegroundWithRAREUIColor:fg];
  }
}

- (void)drawXTickWithRAREiPlatformGraphics:(id<RAREiPlatformGraphics>)g
                                 withFloat:(float)inc
                                 withFloat:(float)x
                                 withFloat:(float)y
                                 withFloat:(float)endx
                                 withFloat:(float)size
                               withBoolean:(BOOL)even {
  float pos = inc + x;
  float yoff = size / 2;
  int n = 0;
  while (pos < endx) {
    if (!even || (n % 2 == 0)) {
      [((id<RAREiPlatformGraphics>) nil_chk(g)) drawLineWithFloat:pos withFloat:y - yoff withFloat:pos withFloat:y + yoff];
    }
    pos += inc;
    n++;
  }
}

- (void)drawYTickWithRAREiPlatformGraphics:(id<RAREiPlatformGraphics>)g
                                 withFloat:(float)inc
                                 withFloat:(float)x
                                 withFloat:(float)y
                                 withFloat:(float)starty
                                 withFloat:(float)size
                               withBoolean:(BOOL)even {
  float pos = y - inc;
  float xoff = size / 2;
  float n = 0;
  while (pos > starty) {
    if (!even || (fmodf(n, 2) == 0)) {
      [((id<RAREiPlatformGraphics>) nil_chk(g)) drawLineWithFloat:x - xoff withFloat:pos withFloat:x + xoff withFloat:pos];
    }
    pos -= inc;
    n++;
  }
}

- (void)paintWithRAREiPlatformGraphics:(id<RAREiPlatformGraphics>)g
                             withFloat:(float)x
                             withFloat:(float)y
                             withFloat:(float)width
                             withFloat:(float)height {
  float offset = 20;
  float endx = x + width - offset;
  float endy = y + height - offset;
  RAREUIColor *fg = [self getForeground];
  [((id<RAREiPlatformGraphics>) nil_chk(g)) setColorWithRAREUIColor:fg];
  [g drawLineWithFloat:x + offset - 10 withFloat:endy withFloat:endx + 5 withFloat:endy];
  [g drawLineWithFloat:x + offset - 5 withFloat:y + offset - 5 withFloat:x + offset - 5 withFloat:endy + 5];
  [self drawXTickWithRAREiPlatformGraphics:g withFloat:20 withFloat:offset withFloat:endy withFloat:endx withFloat:12 withBoolean:NO];
  [self drawYTickWithRAREiPlatformGraphics:g withFloat:20 withFloat:offset + 2 withFloat:endy withFloat:offset withFloat:12 withBoolean:NO];
  if ([((RAREUIColor *) nil_chk(fg)) isDarkColor]) {
    fg = [fg lightWithInt:20];
  }
  else {
    fg = [fg darker];
  }
  [g setColorWithRAREUIColor:fg];
  [self drawXTickWithRAREiPlatformGraphics:g withFloat:10 withFloat:offset withFloat:endy withFloat:endx withFloat:6 withBoolean:YES];
  [self drawYTickWithRAREiPlatformGraphics:g withFloat:10 withFloat:offset + 2 withFloat:endy withFloat:offset withFloat:6 withBoolean:YES];
}

- (void)copyAllFieldsTo:(RARECartesianPanel *)other {
  [super copyAllFieldsTo:other];
  other->label_ = label_;
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "drawXTickWithRAREiPlatformGraphics:withFloat:withFloat:withFloat:withFloat:withFloat:withBoolean:", NULL, "V", 0x0, NULL },
    { "drawYTickWithRAREiPlatformGraphics:withFloat:withFloat:withFloat:withFloat:withFloat:withBoolean:", NULL, "V", 0x0, NULL },
    { "paintWithRAREiPlatformGraphics:withFloat:withFloat:withFloat:withFloat:", NULL, "V", 0x4, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "label_", NULL, 0x0, "LRAREiActionComponent" },
  };
  static J2ObjcClassInfo _RARECartesianPanel = { "CartesianPanel", "com.appnativa.rare.ui.chart", NULL, 0x1, 3, methods, 1, fields, 0, NULL};
  return &_RARECartesianPanel;
}

@end
