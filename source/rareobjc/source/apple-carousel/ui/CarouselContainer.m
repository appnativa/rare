//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Code/Dev/appNativa/source/rareobjc/../rare/apple-carousel/com/appnativa/rare/ui/CarouselContainer.java
//
//  Created by decoteaud on 3/11/16.
//

#include "IOSClass.h"
#include "com/appnativa/rare/Platform.h"
#include "com/appnativa/rare/iConstants.h"
#include "com/appnativa/rare/platform/apple/ui/view/ParentView.h"
#include "com/appnativa/rare/platform/apple/ui/view/ScrollBarView.h"
#include "com/appnativa/rare/platform/apple/ui/view/View.h"
#include "com/appnativa/rare/platform/apple/ui/view/aView.h"
#include "com/appnativa/rare/ui/CarouselContainer.h"
#include "com/appnativa/rare/ui/CarouselPanel.h"
#include "com/appnativa/rare/ui/Component.h"
#include "com/appnativa/rare/ui/Container.h"
#include "com/appnativa/rare/ui/RenderableDataItem.h"
#include "com/appnativa/rare/ui/UIDimension.h"
#include "com/appnativa/rare/ui/XPContainer.h"
#include "com/appnativa/rare/ui/aBorderPanel.h"
#include "com/appnativa/rare/ui/carousel/MotionHandler.h"
#include "com/appnativa/rare/ui/carousel/aCarouselPanel.h"
#include "com/appnativa/rare/ui/event/EventListenerList.h"
#include "com/appnativa/rare/ui/iAdjustable.h"
#include "com/appnativa/rare/ui/iPlatformComponent.h"
#include "java/lang/Integer.h"

@implementation RARECarouselContainer

- (id)initWithRAREaCarouselPanel_DataTypeEnum:(RAREaCarouselPanel_DataTypeEnum *)dataType {
  if (self = [super init]) {
    panel_ = [[RARECarouselPanel alloc] initWithRAREaCarouselPanel_DataTypeEnum:dataType];
    [panel_ setAdjustableWithRAREiAdjustable:[[RARECarouselContainer_Adjustable alloc] initWithRARECarouselContainer:self]];
    scrollView_ = [[RARECarouselContainer_ScrollView alloc] initWithRARECarouselPanel:panel_];
    RAREContainer *c = [[RARECarouselContainer_ScrollPanel alloc] initWithRARECarouselContainer_ScrollView:scrollView_];
    [c addWithRAREiPlatformComponent:panel_];
    [self setCenterViewWithRAREiPlatformComponent:c];
  }
  return self;
}

- (void)dispose {
  [super dispose];
  panel_ = nil;
  scrollbar_ = nil;
  scrollView_ = nil;
}

- (void)refreshItems {
  [((RARECarouselPanel *) nil_chk(panel_)) refreshItems];
  [self revalidate];
}

- (void)setScrollBarOpacityWithFloat:(float)opacity {
}

- (void)setShowScrollBarWithBoolean:(BOOL)show {
  if (![RAREPlatform isTouchDevice]) {
    if (show) {
      if (scrollbar_ == nil) {
        scrollbar_ = [self createScrollbar];
        [((RAREScrollBarView *) nil_chk(scrollbar_)) setThemeWithBoolean:YES];
        [((RARECarouselPanel *) nil_chk(panel_)) setAdjustableWithRAREiAdjustable:(id<RAREiAdjustable>) check_protocol_cast(scrollbar_, @protocol(RAREiAdjustable))];
        RAREComponent *c = [[RAREComponent alloc] initWithRAREView:scrollbar_];
        [c putClientPropertyWithNSString:[RAREiConstants RARE_HALIGN_PROPERTY] withId:[RARERenderableDataItem_HorizontalAlignEnum FILL]];
        [c putClientPropertyWithNSString:[RAREiConstants RARE_VALIGN_PROPERTY] withId:[RARERenderableDataItem_VerticalAlignEnum FILL]];
        [self setBottomViewWithRAREiPlatformComponent:c];
        [self revalidate];
        [self repaint];
      }
    }
    else {
      if (scrollbar_ != nil) {
        [((RARECarouselPanel *) nil_chk(panel_)) setAdjustableWithRAREiAdjustable:[[RARECarouselContainer_Adjustable alloc] initWithRARECarouselContainer:self]];
        [self setBottomViewWithRAREiPlatformComponent:nil];
        scrollbar_ = nil;
        [self revalidate];
        [self repaint];
      }
    }
  }
}

- (RARECarouselPanel *)getCarouselPanel {
  return panel_;
}

- (RAREScrollBarView *)createScrollbar {
  RAREScrollBarView *sb = [[RAREScrollBarView alloc] initWithBoolean:YES];
  return sb;
}

- (void)copyAllFieldsTo:(RARECarouselContainer *)other {
  [super copyAllFieldsTo:other];
  other->panel_ = panel_;
  other->scrollView_ = scrollView_;
  other->scrollbar_ = scrollbar_;
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "getCarouselPanel", NULL, "LRARECarouselPanel", 0x1, NULL },
    { "createScrollbar", NULL, "LRAREScrollBarView", 0x4, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "panel_", NULL, 0x0, "LRARECarouselPanel" },
    { "scrollbar_", NULL, 0x0, "LRAREScrollBarView" },
    { "scrollView_", NULL, 0x0, "LRARECarouselContainer_ScrollView" },
  };
  static J2ObjcClassInfo _RARECarouselContainer = { "CarouselContainer", "com.appnativa.rare.ui", NULL, 0x1, 2, methods, 3, fields, 0, NULL};
  return &_RARECarouselContainer;
}

@end
@implementation RARECarouselContainer_Adjustable

- (id)initWithRARECarouselContainer:(RARECarouselContainer *)container {
  if (self = [super init]) {
    self->container_ = container;
  }
  return self;
}

- (RAREEventListenerList *)getEventListenerList {
  return [((RARECarouselContainer *) nil_chk(container_)) getEventListenerList];
}

- (BOOL)hasListener {
  return ((RARECarouselContainer *) nil_chk(container_))->listenerList_ != nil;
}

- (BOOL)isAdjusting {
  return [((RARECarouselContainer_ScrollView *) nil_chk(((RARECarouselContainer *) nil_chk(container_))->scrollView_)) isScrolling];
}

- (void)copyAllFieldsTo:(RARECarouselContainer_Adjustable *)other {
  [super copyAllFieldsTo:other];
  other->container_ = container_;
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "getEventListenerList", NULL, "LRAREEventListenerList", 0x4, NULL },
    { "hasListener", NULL, "Z", 0x4, NULL },
    { "isAdjusting", NULL, "Z", 0x1, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "container_", NULL, 0x0, "LRARECarouselContainer" },
  };
  static J2ObjcClassInfo _RARECarouselContainer_Adjustable = { "Adjustable", "com.appnativa.rare.ui", "CarouselContainer", 0x8, 3, methods, 1, fields, 0, NULL};
  return &_RARECarouselContainer_Adjustable;
}

@end
@implementation RARECarouselContainer_ScrollPanel

- (id)initWithRARECarouselContainer_ScrollView:(RARECarouselContainer_ScrollView *)view {
  return [super initWithRAREParentView:view];
}

- (void)getMinimumSizeExWithRAREUIDimension:(RAREUIDimension *)size
                                  withFloat:(float)maxWidth {
  [((RAREUIDimension *) nil_chk(size)) setSizeWithInt:0 withInt:0];
  if ([self getComponentCount] == 1) {
    id<RAREiPlatformComponent> c = [self getComponentAtWithInt:0];
    if ([((id<RAREiPlatformComponent>) nil_chk(c)) isVisible]) {
      (void) [c getMinimumSizeWithRAREUIDimension:size withFloat:maxWidth];
    }
  }
}

- (void)getPreferredSizeExWithRAREUIDimension:(RAREUIDimension *)size
                                    withFloat:(float)maxWidth {
  [((RAREUIDimension *) nil_chk(size)) setSizeWithInt:0 withInt:0];
  if ([self getComponentCount] == 1) {
    id<RAREiPlatformComponent> c = [self getComponentAtWithInt:0];
    if ([((id<RAREiPlatformComponent>) nil_chk(c)) isVisible]) {
      (void) [c getPreferredSizeWithRAREUIDimension:size];
    }
  }
}

- (int)getIndexOfComponentAtWithFloat:(float)x
                            withFloat:(float)y {
  RAREView *v = [((RARECarouselContainer_ScrollView *) check_class_cast(view_, [RARECarouselContainer_ScrollView class])) getViewAtWithFloat:x withFloat:y withBoolean:YES];
  while (v != nil) {
    if ([v isKindOfClass:[RARECarouselPanel_ContentView class]]) {
      id<RAREiPlatformComponent> c = [((RAREView *) nil_chk(v)) getComponent];
      JavaLangInteger *index = (JavaLangInteger *) check_class_cast([((id<RAREiPlatformComponent>) nil_chk(c)) getClientPropertyWithNSString:[RAREaCarouselPanel RARE_CAROUSEL_ITEM]], [JavaLangInteger class]);
      return (index == nil) ? -1 : [index intValue];
    }
    v = [((RAREView *) nil_chk(v)) getParent];
  }
  return -1;
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "getMinimumSizeExWithRAREUIDimension:withFloat:", NULL, "V", 0x4, NULL },
    { "getPreferredSizeExWithRAREUIDimension:withFloat:", NULL, "V", 0x4, NULL },
  };
  static J2ObjcClassInfo _RARECarouselContainer_ScrollPanel = { "ScrollPanel", "com.appnativa.rare.ui", "CarouselContainer", 0x8, 2, methods, 0, NULL, 0, NULL};
  return &_RARECarouselContainer_ScrollPanel;
}

@end
@implementation RARECarouselContainer_ScrollView

- (id)initWithRARECarouselPanel:(RARECarouselPanel *)panel {
  if (self = [super initWithId:[RAREaView createAPView]]) {
    motionHandler_ = [[RAREMotionHandler alloc] initWithRAREaCarouselPanel:panel];
    [self setLayoutManagerWithRAREiAppleLayoutManager:self];
  }
  return self;
}

- (void)setComponentWithRAREComponent:(RAREComponent *)component {
  [super setComponentWithRAREComponent:component];
  [((RAREMotionHandler *) nil_chk(motionHandler_)) setScrollingComponentWithRAREMotionHandler_iScrollingParent:(id<RAREMotionHandler_iScrollingParent>) check_protocol_cast(component, @protocol(RAREMotionHandler_iScrollingParent))];
  [self setMouseListenerWithRAREiMouseListener:motionHandler_];
  [self setMouseMotionListenerWithRAREiMouseMotionListener:motionHandler_];
  [self setMouseListenerEnabledWithBoolean:YES];
  [self setMouseMotionListenerEnabledWithBoolean:YES];
}

- (void)layoutWithRAREParentView:(RAREParentView *)view
                       withFloat:(float)width
                       withFloat:(float)height {
  [((RAREMotionHandler *) nil_chk(motionHandler_)) layoutChildWithFloat:width withFloat:height];
}

- (BOOL)isScrolling {
  return [((RAREMotionHandler *) nil_chk(motionHandler_)) isScrolling];
}

- (void)disposeEx {
  [super disposeEx];
  if (motionHandler_ != nil) {
    [motionHandler_ dispose];
  }
  motionHandler_ = nil;
}

- (void)copyAllFieldsTo:(RARECarouselContainer_ScrollView *)other {
  [super copyAllFieldsTo:other];
  other->motionHandler_ = motionHandler_;
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "isScrolling", NULL, "Z", 0x1, NULL },
    { "disposeEx", NULL, "V", 0x4, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "motionHandler_", NULL, 0x0, "LRAREMotionHandler" },
  };
  static J2ObjcClassInfo _RARECarouselContainer_ScrollView = { "ScrollView", "com.appnativa.rare.ui", "CarouselContainer", 0x8, 2, methods, 1, fields, 0, NULL};
  return &_RARECarouselContainer_ScrollView;
}

@end
