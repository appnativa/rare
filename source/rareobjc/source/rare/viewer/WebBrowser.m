//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Code/Dev/appNativa/source/rareobjc/../rare/apple/com/appnativa/rare/viewer/WebBrowser.java
//
//  Created by decoteaud on 9/15/15.
//

#include "IOSClass.h"
#include "com/appnativa/rare/iConstants.h"
#include "com/appnativa/rare/platform/apple/ui/view/WebView.h"
#include "com/appnativa/rare/spot/Browser.h"
#include "com/appnativa/rare/ui/Container.h"
#include "com/appnativa/rare/ui/aWidgetListener.h"
#include "com/appnativa/rare/ui/event/DataEvent.h"
#include "com/appnativa/rare/ui/iPlatformComponent.h"
#include "com/appnativa/rare/viewer/WebBrowser.h"
#include "com/appnativa/rare/viewer/aWebBrowser.h"
#include "com/appnativa/rare/viewer/iContainer.h"
#include "java/lang/Throwable.h"

@implementation RAREWebBrowser

- (id)init {
  return [super init];
}

- (id)initWithRAREiContainer:(id<RAREiContainer>)parent {
  return [super initWithRAREiContainer:parent];
}

- (void)dispose {
  [super dispose];
  webView_ = nil;
}

- (void)setScaleToFitWithBoolean:(BOOL)scaleToFit {
  [((RAREWebView *) nil_chk(webView_)) setScaleToFitWithBoolean:scaleToFit];
}

- (id<RAREaWebBrowser_iBrowser>)createWebViewWithRARESPOTBrowser:(RARESPOTBrowser *)cfg {
  webView_ = [[RAREWebView alloc] init];
  dataComponent_ = formComponent_ = [[RAREContainer alloc] initWithRAREParentView:webView_];
  return [[RAREWebBrowser_AppleBrowser alloc] initWithRAREWebBrowser:self];
}

- (void)copyAllFieldsTo:(RAREWebBrowser *)other {
  [super copyAllFieldsTo:other];
  other->webView_ = webView_;
}

- (NSUInteger)countByEnumeratingWithState:(NSFastEnumerationState *)state objects:(__unsafe_unretained id *)stackbuf count:(NSUInteger)len {
  return JreDefaultFastEnumeration(self, state, stackbuf, len);
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "createWebViewWithRARESPOTBrowser:", NULL, "LRAREaWebBrowser_iBrowser", 0x4, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "webView_", NULL, 0x4, "LRAREWebView" },
  };
  static J2ObjcClassInfo _RAREWebBrowser = { "WebBrowser", "com.appnativa.rare.viewer", NULL, 0x1, 1, methods, 1, fields, 0, NULL};
  return &_RAREWebBrowser;
}

@end
@implementation RAREWebBrowser_AppleBrowser

- (id)initWithRAREWebBrowser:(RAREWebBrowser *)outer$ {
  this$0_ = outer$;
  if (self = [super init]) {
    [((RAREWebView *) nil_chk(outer$->webView_)) setLoadListenerWithRAREWebView_iLoadListener:self];
  }
  return self;
}

- (void)clearContents {
  [((RAREWebView *) nil_chk(this$0_->webView_)) clearContents];
}

- (void)dispose {
  if (this$0_->webView_ != nil) {
    @try {
      [this$0_->webView_ stopLoading];
    }
    @catch (JavaLangThrowable *ignore) {
    }
  }
}

- (void)load__WithNSString:(NSString *)url {
  [((RAREWebView *) nil_chk(this$0_->webView_)) load__WithNSString:url];
  [this$0_ startWaitCursor];
}

- (void)loadContentWithNSString:(NSString *)content
                   withNSString:(NSString *)contentType
                   withNSString:(NSString *)baseHref {
  [((RAREWebView *) nil_chk(this$0_->webView_)) loadContentWithNSString:content withNSString:contentType withNSString:baseHref];
  [this$0_ startWaitCursor];
}

- (void)loadFailedWithRAREWebView:(RAREWebView *)view
                     withNSString:(NSString *)reason {
  [self loadFinishedWithRAREWebView:view withBoolean:YES withNSString:reason];
}

- (void)loadFinishedWithRAREWebView:(RAREWebView *)view {
  [self loadFinishedWithRAREWebView:view withBoolean:NO withNSString:nil];
}

- (void)loadFinishedWithRAREWebView:(RAREWebView *)view
                        withBoolean:(BOOL)failed
                       withNSString:(NSString *)reason {
  if (this$0_->webView_ != nil) {
    if ([this$0_ isEventEnabledWithNSString:[RAREiConstants EVENT_FINISHED_LOADING]]) {
      RAREDataEvent *e = [[RAREDataEvent alloc] initWithId:this$0_->webView_ withId:[this$0_->webView_ getURL] withId:reason];
      if (failed) {
        [e markAsFailureEvent];
      }
      [this$0_ fireEventWithNSString:[RAREiConstants EVENT_FINISHED_LOADING] withJavaUtilEventObject:e];
    }
  }
  [this$0_ hideWaitCursorIfShowing];
}

- (void)loadStartedWithRAREWebView:(RAREWebView *)view {
  if (this$0_->webView_ != nil) {
    if ([this$0_ isEventEnabledWithNSString:[RAREiConstants EVENT_STARTED_LOADING]]) {
      RAREDataEvent *e = [[RAREDataEvent alloc] initWithId:this$0_->webView_ withId:[this$0_->webView_ getURL] withId:nil];
      [this$0_ fireEventWithNSString:[RAREiConstants EVENT_STARTED_LOADING] withJavaUtilEventObject:e];
    }
  }
}

- (BOOL)loadWillStartWithRAREWebView:(RAREWebView *)view
                        withNSString:(NSString *)url
                             withInt:(int)loadType {
  if (this$0_->webView_ != nil) {
    if (([this$0_ getWidgetListener] != nil) && [this$0_ isEventEnabledWithNSString:[RAREiConstants EVENT_CHANGE]]) {
      RAREDataEvent *e = [[RAREDataEvent alloc] initWithId:view withId:url withId:nil];
      (void) [((RAREaWidgetListener *) nil_chk([this$0_ getWidgetListener])) evaluateWithNSString:[RAREiConstants EVENT_CHANGE] withJavaUtilEventObject:e withBoolean:YES];
      if ([e isConsumed]) {
        return NO;
      }
    }
    return YES;
  }
  else {
    return NO;
  }
}

- (void)reload {
  if (this$0_->webView_ != nil) {
    [this$0_->webView_ reload];
  }
}

- (void)stopLoading {
  if (this$0_->webView_ != nil) {
    [this$0_->webView_ stopLoading];
  }
}

- (id<RAREiPlatformComponent>)getComponent {
  return this$0_->formComponent_;
}

- (NSString *)getLocation {
  return [((RAREWebView *) nil_chk(this$0_->webView_)) getURL];
}

- (void)copyAllFieldsTo:(RAREWebBrowser_AppleBrowser *)other {
  [super copyAllFieldsTo:other];
  other->loadingUrl_ = loadingUrl_;
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "initWithRAREWebBrowser:", NULL, NULL, 0x0, NULL },
    { "loadWillStartWithRAREWebView:withNSString:withInt:", NULL, "Z", 0x1, NULL },
    { "getComponent", NULL, "LRAREiPlatformComponent", 0x1, NULL },
    { "getLocation", NULL, "LNSString", 0x1, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "LRAREWebBrowser" },
    { "loadingUrl_", NULL, 0x0, "LNSString" },
  };
  static J2ObjcClassInfo _RAREWebBrowser_AppleBrowser = { "AppleBrowser", "com.appnativa.rare.viewer", "WebBrowser", 0x4, 4, methods, 2, fields, 0, NULL};
  return &_RAREWebBrowser_AppleBrowser;
}

@end
