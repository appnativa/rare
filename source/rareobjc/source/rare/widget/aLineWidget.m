//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Code/Dev/appNativa/source/rareobjc/../rare/core/com/appnativa/rare/widget/aLineWidget.java
//
//  Created by decoteaud on 9/15/15.
//

#include "com/appnativa/rare/iConstants.h"
#include "com/appnativa/rare/spot/Line.h"
#include "com/appnativa/rare/spot/Widget.h"
#include "com/appnativa/rare/ui/BorderPanel.h"
#include "com/appnativa/rare/ui/RenderableDataItem.h"
#include "com/appnativa/rare/ui/ScreenUtils.h"
#include "com/appnativa/rare/ui/UIColor.h"
#include "com/appnativa/rare/ui/UIColorHelper.h"
#include "com/appnativa/rare/ui/UIConstants.h"
#include "com/appnativa/rare/ui/UIFont.h"
#include "com/appnativa/rare/ui/aLineHelper.h"
#include "com/appnativa/rare/ui/iActionComponent.h"
#include "com/appnativa/rare/ui/iPlatformComponent.h"
#include "com/appnativa/rare/ui/iPlatformIcon.h"
#include "com/appnativa/rare/viewer/iContainer.h"
#include "com/appnativa/rare/widget/aLineWidget.h"
#include "com/appnativa/rare/widget/aWidget.h"
#include "com/appnativa/rare/widget/iWidget.h"
#include "com/appnativa/spot/SPOTBoolean.h"
#include "com/appnativa/spot/SPOTEnumerated.h"
#include "com/appnativa/spot/SPOTPrintableString.h"
#include "com/appnativa/spot/SPOTSet.h"
#include "com/appnativa/spot/iSPOTElement.h"
#include "com/appnativa/util/SNumber.h"
#include "java/lang/CharSequence.h"

@implementation RAREaLineWidget

- (id)initWithRAREiContainer:(id<RAREiContainer>)parent {
  if (self = [super initWithRAREiContainer:parent]) {
    widgetType_ = [RAREiWidget_WidgetTypeEnum Line];
    isSubmittable__ = NO;
  }
  return self;
}

- (void)configureWithRARESPOTWidget:(RARESPOTWidget *)cfg {
  [self configureExWithRARESPOTLine:(RARESPOTLine *) check_class_cast(cfg, [RARESPOTLine class])];
  [self fireConfigureEventWithRARESPOTWidget:cfg withNSString:[RAREiConstants EVENT_CONFIGURE]];
}

- (void)dispose {
  [super dispose];
  if (lineHelper_ != nil) {
    [lineHelper_ dispose];
  }
  leftLabel_ = nil;
  rightLabel_ = nil;
  lineHelper_ = nil;
}

- (void)setHorizontalWithBoolean:(BOOL)horizontal {
  [((RAREaLineHelper *) nil_chk(lineHelper_)) setHorizontalWithBoolean:horizontal];
  if (borderPanel_ != nil) {
    [borderPanel_ setHorizontalWithBoolean:horizontal];
  }
}

- (void)setLeftIconWithRAREiPlatformIcon:(id<RAREiPlatformIcon>)icon {
  if (leftLabel_ != nil) {
    [leftLabel_ setIconWithRAREiPlatformIcon:icon];
  }
}

- (void)setLeftTextWithJavaLangCharSequence:(id<JavaLangCharSequence>)text {
  if (leftLabel_ != nil) {
    [leftLabel_ setTextWithJavaLangCharSequence:text];
  }
}

- (void)setRightIconWithRAREiPlatformIcon:(id<RAREiPlatformIcon>)icon {
  if (rightLabel_ != nil) {
    [rightLabel_ setIconWithRAREiPlatformIcon:icon];
  }
}

- (void)setRightTextWithJavaLangCharSequence:(id<JavaLangCharSequence>)text {
  if (rightLabel_ != nil) {
    [rightLabel_ setTextWithJavaLangCharSequence:text];
  }
}

- (void)setValueWithId:(id)value {
  id<JavaLangCharSequence> s = nil;
  if ([value conformsToProtocol: @protocol(JavaLangCharSequence)]) {
    s = (id<JavaLangCharSequence>) check_protocol_cast(value, @protocol(JavaLangCharSequence));
  }
  else {
    s = (value == nil) ? nil : [value description];
  }
  if ([((id<RAREiPlatformComponent>) nil_chk(dataComponent_)) isLeftToRight]) {
    [self setLeftTextWithJavaLangCharSequence:s];
  }
  else {
    [self setRightTextWithJavaLangCharSequence:s];
  }
}

- (id<RAREiPlatformIcon>)getRightIcon {
  if (rightLabel_ != nil) {
    return [rightLabel_ getIcon];
  }
  return nil;
}

- (id<RAREiActionComponent>)getRightLabelComponent {
  return rightLabel_;
}

- (NSString *)getRightText {
  if (rightLabel_ != nil) {
    return [((id<JavaLangCharSequence>) nil_chk([rightLabel_ getText])) sequenceDescription];
  }
  return nil;
}

- (id)getSelection {
  return theValue_;
}

- (BOOL)isHorizontal {
  return [((RAREaLineHelper *) nil_chk(lineHelper_)) isHorizontal];
}

- (void)configureExWithRARESPOTLine:(RARESPOTLine *)cfg {
  RAREaLineHelper *lc = [self createLineHelperAndComponentsWithRARESPOTLine:cfg];
  lineHelper_ = lc;
  BOOL horiz = [((SPOTBoolean *) nil_chk(((RARESPOTLine *) nil_chk(cfg))->horizontal_)) booleanValue];
  [((RAREaLineHelper *) nil_chk(lineHelper_)) setHorizontalWithBoolean:horiz];
  SPOTSet *lines = [cfg getLines];
  NSString *s;
  if (lines != nil) {
    int len = [lines getCount];
    RAREaLineHelper_StrokeStyleEnum *style;
    float thickness;
    int loff;
    int roff;
    SPOTEnumerated *line;
    RAREUIColor *c;
    for (int i = 0; i < len; i++) {
      line = (SPOTEnumerated *) check_class_cast([lines getExWithInt:i], [SPOTEnumerated class]);
      s = [((SPOTEnumerated *) nil_chk(line)) spot_getAttributeWithNSString:@"thickness"];
      thickness = (s == nil) ? 1.0f : [RAREUTSNumber floatValueWithNSString:s];
      c = [RAREUIColorHelper getColorWithNSString:[line spot_getAttributeWithNSString:@"color"]];
      loff = [RAREScreenUtils toPlatformPixelWidthWithNSString:[line spot_getAttributeWithNSString:@"leftOffset"] withRAREiPlatformComponent:dataComponent_ withFloat:100];
      roff = [RAREScreenUtils toPlatformPixelWidthWithNSString:[line spot_getAttributeWithNSString:@"rightOffset"] withRAREiPlatformComponent:dataComponent_ withFloat:100];
      thickness *= [RAREScreenUtils getPixelMultiplier];
      switch ([line intValue]) {
        case RARESPOTLine_CLineStyle_solid:
        style = [RAREaLineHelper_StrokeStyleEnum SOLID];
        break;
        case RARESPOTLine_CLineStyle_dashed:
        style = [RAREaLineHelper_StrokeStyleEnum DASHED];
        break;
        case RARESPOTLine_CLineStyle_dotted:
        style = [RAREaLineHelper_StrokeStyleEnum DOTTED];
        break;
        default:
        style = nil;
        break;
      }
      [lc addLineWithRAREaLineHelper_Line:[((RAREaLineHelper *) nil_chk(lc)) createLineWithRAREaLineHelper_StrokeStyleEnum:style withFloat:thickness withRAREUIColor:c withInt:loff withInt:roff]];
    }
  }
  switch ([((RARESPOTLine_CPosition *) nil_chk(cfg->position_)) intValue]) {
    case RARESPOTLine_CPosition_top:
    [((RAREaLineHelper *) nil_chk(lc)) setPositionWithInt:RAREUIConstants_TOP];
    break;
    case RARESPOTLine_CPosition_bottom:
    [((RAREaLineHelper *) nil_chk(lc)) setPositionWithInt:RAREUIConstants_BOTTOM];
    break;
    default:
    [((RAREaLineHelper *) nil_chk(lc)) setPositionWithInt:RAREUIConstants_CENTER];
    break;
  }
  NSString *left = [((SPOTPrintableString *) nil_chk(cfg->leftLabel_)) getValue];
  NSString *right = [((SPOTPrintableString *) nil_chk(cfg->rightLabel_)) getValue];
  id<RAREiPlatformIcon> leftic = [self getIconWithSPOTPrintableString:cfg->leftIcon_];
  id<RAREiPlatformIcon> rightic = [self getIconWithSPOTPrintableString:cfg->rightIcon_];
  if ((left != nil) || (right != nil) || (leftic != nil) || (rightic != nil)) {
    if ((left != nil) || (leftic != nil)) {
      leftLabel_ = [self createLabelWithNSString:[self expandStringWithNSString:left] withRAREiPlatformIcon:leftic withBoolean:YES];
    }
    if ((right != nil) || (rightic != nil)) {
      rightLabel_ = [self createLabelWithNSString:[self expandStringWithNSString:right] withRAREiPlatformIcon:rightic withBoolean:NO];
    }
    formComponent_ = borderPanel_ = [self createFormComponentWithBoolean:horiz withRAREiActionComponent:leftLabel_ withRAREiPlatformComponent:dataComponent_ withRAREiActionComponent:rightLabel_];
  }
  [self configureWithRARESPOTWidget:cfg withBoolean:YES withBoolean:NO withBoolean:YES withBoolean:YES];
  RAREUIColor *fg = [((id<RAREiPlatformComponent>) nil_chk([self getDataComponent])) getForegroundEx];
  RAREUIFont *f = [((id<RAREiPlatformComponent>) nil_chk([self getDataComponent])) getFontEx];
  if (leftLabel_ != nil) {
    if (f != nil) {
      [leftLabel_ setFontWithRAREUIFont:f];
    }
    if (fg != nil) {
      [leftLabel_ setForegroundWithRAREUIColor:fg];
    }
  }
  if (rightLabel_ != nil) {
    if (f != nil) {
      [rightLabel_ setFontWithRAREUIFont:f];
    }
    if (fg != nil) {
      [rightLabel_ setForegroundWithRAREUIColor:fg];
    }
  }
}

- (RAREBorderPanel *)createFormComponentWithBoolean:(BOOL)horizontal
                           withRAREiActionComponent:(id<RAREiActionComponent>)leftLabel
                         withRAREiPlatformComponent:(id<RAREiPlatformComponent>)line
                           withRAREiActionComponent:(id<RAREiActionComponent>)rightLabel {
  RAREBorderPanel *panel = [[RAREBorderPanel alloc] initWithRAREiWidget:self];
  [panel setCenterViewWithRAREiPlatformComponent:line];
  if (horizontal) {
    if (leftLabel != nil) {
      [leftLabel putClientPropertyWithNSString:[RAREiConstants RARE_HALIGN_PROPERTY] withId:[RARERenderableDataItem_HorizontalAlignEnum RIGHT]];
      [leftLabel putClientPropertyWithNSString:[RAREiConstants RARE_VALIGN_PROPERTY] withId:[RARERenderableDataItem_VerticalAlignEnum CENTER]];
      [panel setLeftViewWithRAREiPlatformComponent:leftLabel];
    }
    if (rightLabel != nil) {
      [rightLabel putClientPropertyWithNSString:[RAREiConstants RARE_HALIGN_PROPERTY] withId:[RARERenderableDataItem_HorizontalAlignEnum LEFT]];
      [rightLabel putClientPropertyWithNSString:[RAREiConstants RARE_VALIGN_PROPERTY] withId:[RARERenderableDataItem_VerticalAlignEnum CENTER]];
      [panel setRightViewWithRAREiPlatformComponent:rightLabel];
    }
  }
  else {
    if (leftLabel != nil) {
      [leftLabel putClientPropertyWithNSString:[RAREiConstants RARE_HALIGN_PROPERTY] withId:[RARERenderableDataItem_HorizontalAlignEnum CENTER]];
      [leftLabel putClientPropertyWithNSString:[RAREiConstants RARE_VALIGN_PROPERTY] withId:[RARERenderableDataItem_VerticalAlignEnum BOTTOM]];
      [panel setTopViewWithRAREiPlatformComponent:leftLabel];
      [leftLabel setOrientationWithRARERenderableDataItem_OrientationEnum:[RARERenderableDataItem_OrientationEnum VERTICAL_DOWN]];
    }
    if (rightLabel != nil) {
      [rightLabel putClientPropertyWithNSString:[RAREiConstants RARE_HALIGN_PROPERTY] withId:[RARERenderableDataItem_HorizontalAlignEnum CENTER]];
      [rightLabel putClientPropertyWithNSString:[RAREiConstants RARE_VALIGN_PROPERTY] withId:[RARERenderableDataItem_VerticalAlignEnum TOP]];
      [rightLabel setOrientationWithRARERenderableDataItem_OrientationEnum:[RARERenderableDataItem_OrientationEnum VERTICAL_DOWN]];
      [panel setBottomViewWithRAREiPlatformComponent:rightLabel];
    }
  }
  return panel;
}

- (id<RAREiActionComponent>)createLabelWithNSString:(NSString *)text
                              withRAREiPlatformIcon:(id<RAREiPlatformIcon>)icon
                                        withBoolean:(BOOL)left {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (RAREaLineHelper *)createLineHelperAndComponentsWithRARESPOTLine:(RARESPOTLine *)cfg {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (void)copyAllFieldsTo:(RAREaLineWidget *)other {
  [super copyAllFieldsTo:other];
  other->borderPanel_ = borderPanel_;
  other->leftLabel_ = leftLabel_;
  other->lineHelper_ = lineHelper_;
  other->rightLabel_ = rightLabel_;
}

- (NSUInteger)countByEnumeratingWithState:(NSFastEnumerationState *)state objects:(__unsafe_unretained id *)stackbuf count:(NSUInteger)len {
  return JreDefaultFastEnumeration(self, state, stackbuf, len);
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "getRightIcon", NULL, "LRAREiPlatformIcon", 0x1, NULL },
    { "getRightLabelComponent", NULL, "LRAREiActionComponent", 0x1, NULL },
    { "getRightText", NULL, "LNSString", 0x1, NULL },
    { "getSelection", NULL, "LNSObject", 0x1, NULL },
    { "isHorizontal", NULL, "Z", 0x1, NULL },
    { "configureExWithRARESPOTLine:", NULL, "V", 0x4, NULL },
    { "createFormComponentWithBoolean:withRAREiActionComponent:withRAREiPlatformComponent:withRAREiActionComponent:", NULL, "LRAREBorderPanel", 0x4, NULL },
    { "createLabelWithNSString:withRAREiPlatformIcon:withBoolean:", NULL, "LRAREiActionComponent", 0x404, NULL },
    { "createLineHelperAndComponentsWithRARESPOTLine:", NULL, "LRAREaLineHelper", 0x404, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "borderPanel_", NULL, 0x0, "LRAREBorderPanel" },
    { "leftLabel_", NULL, 0x4, "LRAREiActionComponent" },
    { "lineHelper_", NULL, 0x4, "LRAREaLineHelper" },
    { "rightLabel_", NULL, 0x4, "LRAREiActionComponent" },
  };
  static J2ObjcClassInfo _RAREaLineWidget = { "aLineWidget", "com.appnativa.rare.widget", NULL, 0x401, 9, methods, 4, fields, 0, NULL};
  return &_RAREaLineWidget;
}

@end
