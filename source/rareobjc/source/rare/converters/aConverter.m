//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Code/Dev/appNativa/source/rareobjc/../rare/core/com/appnativa/rare/converters/aConverter.java
//
//  Created by decoteaud on 9/15/15.
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "com/appnativa/rare/Platform.h"
#include "com/appnativa/rare/converters/ConverterContext.h"
#include "com/appnativa/rare/converters/aConverter.h"
#include "com/appnativa/rare/converters/iDataConverter.h"
#include "com/appnativa/rare/iPlatformAppContext.h"
#include "com/appnativa/rare/ui/RenderableDataItem.h"
#include "com/appnativa/rare/ui/iPlatformRenderingComponent.h"
#include "com/appnativa/rare/viewer/iViewer.h"
#include "com/appnativa/rare/widget/iWidget.h"
#include "com/appnativa/util/FormatException.h"
#include "com/appnativa/util/Helper.h"
#include "com/appnativa/util/Streams.h"
#include "com/appnativa/util/StringReaderEx.h"
#include "java/io/IOException.h"
#include "java/io/Reader.h"
#include "java/lang/CharSequence.h"
#include "java/lang/Comparable.h"
#include "java/lang/Exception.h"

@implementation RAREaConverter

- (id)init {
  return [super init];
}

- (id)createContextWithRAREiWidget:(id<RAREiWidget>)widget
                      withNSString:(NSString *)value {
  return value;
}

+ (id<RAREiDataConverter>)createConverterWithRAREiWidget:(id<RAREiWidget>)widget
                                            withNSString:(NSString *)name
                                                 withInt:(int)type {
  IOSClass *cls = nil;
  if (name != nil) {
    cls = [RAREPlatform getDataConverterClassWithNSString:name];
  }
  if (cls == nil) {
    cls = [RARERenderableDataItem getDefaultConverterClassWithInt:type];
  }
  if (cls == nil) {
    return nil;
  }
  return [RAREPlatform getDataConverterWithIOSClass:cls];
}

+ (RAREUTFormatException *)formatExceptionWithRAREiWidget:(id<RAREiWidget>)widget
                                             withNSString:(NSString *)value
                                             withIOSClass:(IOSClass *)cls {
  id<RAREiPlatformAppContext> app = (widget == nil) ? [RAREPlatform getAppContext] : [widget getAppContext];
  return [[RAREUTFormatException alloc] initWithNSString:[app getResourceAsStringWithNSString:@"Rare.runtime.text.cannotConvert"] withNSString:value withNSString:[((IOSClass *) nil_chk(cls)) getName]];
}

+ (RAREUTFormatException *)formatExceptionWithRAREiWidget:(id<RAREiWidget>)widget
                                             withNSString:(NSString *)format
                                             withNSString:(NSString *)value {
  id<RAREiPlatformAppContext> app = (widget == nil) ? [RAREPlatform getAppContext] : [widget getAppContext];
  return [[RAREUTFormatException alloc] initWithNSString:[app getResourceAsStringWithNSString:@"Rare.runtime.text.formatInvalid"] withNSString:value withNSString:format];
}

- (id)fromStringWithNSString:(NSString *)string
    withRAREConverterContext:(RAREConverterContext *)ctx {
  id o = nil;
  if (ctx != nil) {
    o = [ctx getUserObject];
  }
  if (o == nil) {
    o = theContext_;
  }
  return [self objectFromStringWithRAREiWidget:widget_ withNSString:string withId:o];
}

- (id)objectFromStringWithRAREiWidget:(id<RAREiWidget>)widget
                         withNSString:(NSString *)value {
  return [self objectFromStringWithRAREiWidget:widget withNSString:value withId:nil];
}

- (id)objectFromStringWithRAREiWidget:(id<RAREiWidget>)widget
                         withNSString:(NSString *)value
                               withId:(id)context {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (id<JavaLangCharSequence>)objectToStringWithRAREiWidget:(id<RAREiWidget>)widget
                                                   withId:(id)object {
  return [self objectToStringWithRAREiWidget:[self getWidgetEx] withId:object withId:nil];
}

- (id<JavaLangCharSequence>)objectToStringWithRAREiWidget:(id<RAREiWidget>)widget
                                                   withId:(id)object
                                                   withId:(id)context {
  return (object == nil) ? nil : [object description];
}

- (BOOL)objectsAreImmutableWithId:(id)context {
  return NO;
}

- (id<JavaLangCharSequence>)readerToStringWithJavaIoReader:(JavaIoReader *)r {
  @try {
    if ([r isKindOfClass:[RAREUTStringReaderEx class]]) {
      return [((RAREUTStringReaderEx *) check_class_cast(r, [RAREUTStringReaderEx class])) getString];
    }
    return [RAREUTStreams readerToStringWithJavaIoReader:r];
  }
  @catch (JavaIoIOException *ex) {
    [RAREPlatform ignoreExceptionWithNSString:nil withJavaLangThrowable:ex];
    return nil;
  }
}

+ (void)showRangeErrorWithJavaLangComparable:(id<JavaLangComparable>)minValue
                      withJavaLangComparable:(id<JavaLangComparable>)maxValue {
  id<RAREiPlatformAppContext> app = [RAREPlatform getAppContext];
  NSString *title = [((id<RAREiPlatformAppContext>) nil_chk(app)) getResourceAsStringWithNSString:@"Rare.runtime.text.fieldInvalidFormatTitle"];
  [app oneLineErrorMessageWithNSString:title withNSString:[RAREaConverter getRangeErrorWithJavaLangComparable:minValue withJavaLangComparable:maxValue]];
}

- (BOOL)supportFromStringWithNSString:(NSString *)string
             withRAREConverterContext:(RAREConverterContext *)ctx {
  return YES;
}

- (BOOL)supportToStringWithId:(id)object
     withRAREConverterContext:(RAREConverterContext *)ctx {
  return YES;
}

- (id<JavaLangCharSequence>)toStringWithId:(id)object
                  withRAREConverterContext:(RAREConverterContext *)ctx {
  id o = nil;
  if (ctx != nil) {
    o = [ctx getUserObject];
  }
  if (o == nil) {
    o = theContext_;
  }
  return [self objectToStringWithRAREiWidget:[self getWidgetEx] withId:object withId:o];
}

- (void)setMaxValueWithJavaLangComparable:(id<JavaLangComparable>)maxValue {
  self->maxValue_ = maxValue;
}

- (void)setMinValueWithJavaLangComparable:(id<JavaLangComparable>)minValue {
  self->minValue_ = minValue;
}

- (void)setObjectClassWithIOSClass:(IOSClass *)cls {
  objectClass_ = cls;
}

- (void)setWidgetWithRAREiWidget:(id<RAREiWidget>)widget {
  self->widget_ = widget;
}

- (id<JavaLangComparable>)getMaxValue {
  return maxValue_;
}

- (id<JavaLangComparable>)getMinValue {
  return minValue_;
}

- (IOSClass *)getObjectClassWithId:(id)context {
  return (objectClass_ == nil) ? [IOSClass classWithClass:[NSObject class]] : objectClass_;
}

+ (NSString *)getRangeErrorWithJavaLangComparable:(id<JavaLangComparable>)minValue
                           withJavaLangComparable:(id<JavaLangComparable>)maxValue {
  NSString *s;
  id<RAREiPlatformAppContext> app = [RAREPlatform getAppContext];
  if ((minValue != nil) && (maxValue != nil)) {
    s = [RAREUTHelper expandStringWithNSString:[((id<RAREiPlatformAppContext>) nil_chk(app)) getResourceAsStringWithNSString:@"Rare.runtime.text.fieldValueNotInRange"] withNSStringArray:[IOSObjectArray arrayWithObjects:(id[]){ [minValue description], [maxValue description] } count:2 type:[IOSClass classWithClass:[NSString class]]]];
  }
  else if (minValue != nil) {
    s = [RAREUTHelper expandStringWithNSString:[((id<RAREiPlatformAppContext>) nil_chk(app)) getResourceAsStringWithNSString:@"Rare.runtime.text.fieldValueToSmall"] withNSStringArray:[IOSObjectArray arrayWithObjects:(id[]){ [minValue description] } count:1 type:[IOSClass classWithClass:[NSString class]]]];
  }
  else if (maxValue != nil) {
    s = [RAREUTHelper expandStringWithNSString:[((id<RAREiPlatformAppContext>) nil_chk(app)) getResourceAsStringWithNSString:@"Rare.runtime.text.fieldValueToBig"] withNSStringArray:[IOSObjectArray arrayWithObjects:(id[]){ [maxValue description] } count:1 type:[IOSClass classWithClass:[NSString class]]]];
  }
  else {
    s = [((id<RAREiPlatformAppContext>) nil_chk(app)) getResourceAsStringWithNSString:@"Rare.runtime.text.fieldInvalidMessage"];
  }
  return s;
}

- (id<RAREiPlatformRenderingComponent>)getRendererWithRAREiWidget:(id<RAREiWidget>)widget
                                                           withId:(id)context {
  return nil;
}

- (id<RAREiWidget>)getWidget {
  return widget_;
}

- (id<RAREiWidget>)getWidgetEx {
  id<RAREiWidget> w = [self getWidget];
  return (w == nil) ? ((id) [RAREPlatform getContextRootViewer]) : ((id) w);
}

- (void)copyAllFieldsTo:(RAREaConverter *)other {
  [super copyAllFieldsTo:other];
  other->maxValue_ = maxValue_;
  other->minValue_ = minValue_;
  other->objectClass_ = objectClass_;
  other->theContext_ = theContext_;
  other->widget_ = widget_;
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "createContextWithRAREiWidget:withNSString:", NULL, "LNSObject", 0x1, NULL },
    { "createConverterWithRAREiWidget:withNSString:withInt:", NULL, "LRAREiDataConverter", 0x9, "JavaLangException" },
    { "formatExceptionWithRAREiWidget:withNSString:withIOSClass:", NULL, "LRAREUTFormatException", 0x9, NULL },
    { "formatExceptionWithRAREiWidget:withNSString:withNSString:", NULL, "LRAREUTFormatException", 0x9, NULL },
    { "fromStringWithNSString:withRAREConverterContext:", NULL, "LNSObject", 0x1, NULL },
    { "objectFromStringWithRAREiWidget:withNSString:", NULL, "LNSObject", 0x1, NULL },
    { "objectFromStringWithRAREiWidget:withNSString:withId:", NULL, "LNSObject", 0x401, NULL },
    { "objectToStringWithRAREiWidget:withId:", NULL, "LJavaLangCharSequence", 0x1, NULL },
    { "objectToStringWithRAREiWidget:withId:withId:", NULL, "LJavaLangCharSequence", 0x1, NULL },
    { "objectsAreImmutableWithId:", NULL, "Z", 0x1, NULL },
    { "readerToStringWithJavaIoReader:", NULL, "LJavaLangCharSequence", 0x1, NULL },
    { "supportFromStringWithNSString:withRAREConverterContext:", NULL, "Z", 0x1, NULL },
    { "supportToStringWithId:withRAREConverterContext:", NULL, "Z", 0x1, NULL },
    { "toStringWithId:withRAREConverterContext:", NULL, "LJavaLangCharSequence", 0x1, NULL },
    { "getMaxValue", NULL, "LJavaLangComparable", 0x1, NULL },
    { "getMinValue", NULL, "LJavaLangComparable", 0x1, NULL },
    { "getObjectClassWithId:", NULL, "LIOSClass", 0x1, NULL },
    { "getRangeErrorWithJavaLangComparable:withJavaLangComparable:", NULL, "LNSString", 0x9, NULL },
    { "getRendererWithRAREiWidget:withId:", NULL, "LRAREiPlatformRenderingComponent", 0x1, NULL },
    { "getWidget", NULL, "LRAREiWidget", 0x1, NULL },
    { "getWidgetEx", NULL, "LRAREiWidget", 0x2, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "objectClass_", NULL, 0x0, "LIOSClass" },
    { "maxValue_", NULL, 0x4, "LJavaLangComparable" },
    { "minValue_", NULL, 0x4, "LJavaLangComparable" },
    { "theContext_", NULL, 0x4, "LNSObject" },
    { "widget_", NULL, 0x4, "LRAREiWidget" },
  };
  static J2ObjcClassInfo _RAREaConverter = { "aConverter", "com.appnativa.rare.converters", NULL, 0x401, 21, methods, 5, fields, 0, NULL};
  return &_RAREaConverter;
}

@end
