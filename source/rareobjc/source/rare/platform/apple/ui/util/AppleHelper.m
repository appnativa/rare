//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Code/Dev/appNativa/source/rareobjc/../rare/apple/com/appnativa/rare/platform/apple/ui/util/AppleHelper.java
//
//  Created by decoteaud on 3/11/16.
//

#include "com/appnativa/rare/platform/apple/ui/util/AppleHelper.h"
#include "com/appnativa/rare/platform/apple/ui/view/ScrollBarView.h"
#include "com/appnativa/rare/platform/apple/ui/view/ScrollView.h"
#include "com/appnativa/rare/platform/apple/ui/view/View.h"
#include "com/appnativa/rare/platform/apple/ui/view/aPlatformTableBasedView.h"
#include "com/appnativa/rare/spot/ScrollPane.h"
#include "com/appnativa/rare/spot/Widget.h"
#include "com/appnativa/rare/ui/BorderPanel.h"
#include "com/appnativa/rare/ui/Container.h"
#include "com/appnativa/rare/ui/Location.h"
#include "com/appnativa/rare/ui/ScrollPanePanel.h"
#include "com/appnativa/rare/ui/UIColor.h"
#include "com/appnativa/rare/ui/iListHandler.h"
#include "com/appnativa/rare/ui/iPlatformComponent.h"
#include "com/appnativa/rare/ui/iScrollerSupport.h"
#include "com/appnativa/rare/ui/listener/WidgetScriptChangeListener.h"
#include "com/appnativa/rare/ui/painter/UIScrollingEdgePainter.h"
#include "com/appnativa/rare/ui/table/TableComponent.h"
#include "com/appnativa/rare/viewer/FormViewer.h"
#include "com/appnativa/rare/viewer/aViewer.h"
#include "com/appnativa/rare/viewer/iContainer.h"
#include "com/appnativa/rare/viewer/iViewer.h"
#include "com/appnativa/rare/widget/aPlatformWidget.h"
#include "com/appnativa/rare/widget/iWidget.h"
#include "com/appnativa/spot/SPOTAny.h"
#include "com/appnativa/spot/SPOTEnumerated.h"
#include "com/appnativa/spot/iSPOTElement.h"

@implementation RAREAppleHelper

static RARESPOTScrollPane * RAREAppleHelper_DEFAULT_SCROLLPANE_CONFIG_;

+ (RARESPOTScrollPane *)DEFAULT_SCROLLPANE_CONFIG {
  return RAREAppleHelper_DEFAULT_SCROLLPANE_CONFIG_;
}

+ (void)setDEFAULT_SCROLLPANE_CONFIG:(RARESPOTScrollPane *)DEFAULT_SCROLLPANE_CONFIG {
  RAREAppleHelper_DEFAULT_SCROLLPANE_CONFIG_ = DEFAULT_SCROLLPANE_CONFIG;
}

+ (void)configureScrollBarViewWithRAREiWidget:(id<RAREiWidget>)w
                           withRAREScrollView:(RAREScrollView *)sv
                           withSPOTEnumerated:(SPOTEnumerated *)cfg
                                  withBoolean:(BOOL)vertical {
  int val = [((SPOTEnumerated *) nil_chk(cfg)) intValue];
  RAREScrollBarView *sb = nil;
  if ((val == RARESPOTScrollPane_CVerticalScrollbar_show_as_needed) || (val == RARESPOTScrollPane_CVerticalScrollbar_show_always)) {
    if (vertical) {
      sb = [((RAREScrollView *) nil_chk(sv)) getVerticalScrollBar];
    }
    else {
      sb = [((RAREScrollView *) nil_chk(sv)) getHorizontalScrollBar];
    }
    if (val == RARESPOTScrollPane_CVerticalScrollbar_show_always) {
      [((RAREScrollBarView *) nil_chk(sb)) setShowAlwaysWithBoolean:YES];
    }
    NSString *code = [cfg spot_getAttributeWithNSString:@"onChange"];
    if ((code != nil)) {
      [((RAREScrollBarView *) nil_chk(sb)) addChangeListenerWithRAREiChangeListener:[[RAREWidgetScriptChangeListener alloc] initWithRAREiWidget:w withId:code]];
    }
  }
  else {
    if (vertical) {
      [((RAREScrollView *) nil_chk(sv)) setShowsVerticalScrollIndicatorWithBoolean:NO];
    }
    else {
      [((RAREScrollView *) nil_chk(sv)) setShowsHorizontalScrollIndicatorWithBoolean:NO];
    }
  }
}

+ (id<RAREiPlatformComponent>)configureScrollPaneWithRAREiWidget:(id<RAREiWidget>)widget
                                      withRAREiPlatformComponent:(id<RAREiPlatformComponent>)fc
                                                    withRAREView:(RAREView *)view
                                          withRARESPOTScrollPane:(RARESPOTScrollPane *)sp {
  BOOL scrollview = [((RAREView *) nil_chk(view)) isScrollView];
  if ((sp == nil) && ([(id) widget conformsToProtocol: @protocol(RAREiListHandler)])) {
    sp = RAREAppleHelper_DEFAULT_SCROLLPANE_CONFIG_;
  }
  if (sp == nil) {
    return fc;
  }
  RAREScrollView *sv;
  BOOL wrapped = NO;
  if (scrollview) {
    sv = [RAREScrollView wrapWithId:[view getProxy]];
    wrapped = YES;
  }
  else {
    sv = [[RAREScrollView alloc] init];
  }
  [RAREAppleHelper configureScrollBarViewWithRAREiWidget:widget withRAREScrollView:sv withSPOTEnumerated:((RARESPOTScrollPane *) nil_chk(sp))->verticalScrollbar_ withBoolean:YES];
  [RAREAppleHelper configureScrollBarViewWithRAREiWidget:widget withRAREScrollView:sv withSPOTEnumerated:sp->horizontalScrollbar_ withBoolean:NO];
  if ([sp isAlwaysHidden]) {
    [((RAREScrollView *) nil_chk(sv)) setScrollEnabledWithBoolean:NO];
  }
  id<RAREiPlatformComponent> c;
  if (scrollview) {
    c = fc;
    if (([view isKindOfClass:[RAREaPlatformTableBasedView class]])) {
      [((RAREScrollView *) nil_chk(sv)) setScrollBarListenersWithRAREaPlatformTableBasedView:(RAREaPlatformTableBasedView *) check_class_cast(view, [RAREaPlatformTableBasedView class])];
    }
    [((RAREScrollView *) nil_chk(sv)) unwrap];
  }
  else {
    RAREContainer *cc = [[RAREScrollPanePanel alloc] initWithId:sv];
    [cc addWithRAREiPlatformComponent:fc withInt:0];
    [((RAREView *) nil_chk([((id<RAREiPlatformComponent>) nil_chk(fc)) getView])) makeTransparent];
    [cc setBackgroundWithRAREUIColor:[RAREUIColor WHITE]];
    c = cc;
  }
  if (!wrapped && [((RAREScrollView *) nil_chk(sv)) hasHorizontalScrollBar]) {
    [sv setScrollingEdgePainterWithRAREUIScrollingEdgePainter:[RAREUIScrollingEdgePainter getInstance]];
  }
  RAREaViewer *v = (RAREaViewer *) check_class_cast([((id<RAREiWidget>) nil_chk(widget)) getViewer], [RAREaViewer class]);
  if ((v != nil) && ([sp hasColumnWidgets] || [sp hasRowWidgets])) {
    RARESPOTWidget *wc;
    id<RAREiWidget> w;
    RAREBorderPanel *bp = [[RAREBorderPanel alloc] init];
    id<RAREiPlatformComponent> pc;
    [bp setUseCrossPatternWithBoolean:YES];
    [bp setCenterViewWithRAREiPlatformComponent:c];
    wc = (RARESPOTWidget *) check_class_cast([((SPOTAny *) nil_chk(sp->columnHeader_)) getValue], [RARESPOTWidget class]);
    w = [RAREAppleHelper getWidgetWithRAREiWidget:widget withRARESPOTWidget:wc];
    if (w != nil) {
      [v registerOrphanWidgetWithRAREiWidget:w];
      pc = [RAREAppleHelper getScrollComponentWithRAREiWidget:w];
      [bp setTopViewWithRAREiPlatformComponent:pc];
      [RAREAppleHelper setScrollComponentViewWithRAREiPlatformComponent:fc withRAREView:view withRAREiPlatformComponent:pc withRARELocationEnum:[RARELocationEnum TOP]];
    }
    wc = (RARESPOTWidget *) check_class_cast([((SPOTAny *) nil_chk(sp->columnFooter_)) getValue], [RARESPOTWidget class]);
    w = [RAREAppleHelper getWidgetWithRAREiWidget:widget withRARESPOTWidget:wc];
    if (w != nil) {
      [v registerOrphanWidgetWithRAREiWidget:w];
      pc = [RAREAppleHelper getScrollComponentWithRAREiWidget:w];
      [bp setBottomViewWithRAREiPlatformComponent:pc];
      [RAREAppleHelper setScrollComponentViewWithRAREiPlatformComponent:fc withRAREView:view withRAREiPlatformComponent:pc withRARELocationEnum:[RARELocationEnum BOTTOM]];
    }
    wc = (RARESPOTWidget *) check_class_cast([((SPOTAny *) nil_chk(sp->rowFooter_)) getValue], [RARESPOTWidget class]);
    w = [RAREAppleHelper getWidgetWithRAREiWidget:widget withRARESPOTWidget:wc];
    if (w != nil) {
      [v registerOrphanWidgetWithRAREiWidget:w];
      pc = [RAREAppleHelper getScrollComponentWithRAREiWidget:w];
      [bp setRightViewWithRAREiPlatformComponent:pc];
      [RAREAppleHelper setScrollComponentViewWithRAREiPlatformComponent:fc withRAREView:view withRAREiPlatformComponent:pc withRARELocationEnum:[RARELocationEnum RIGHT]];
    }
    wc = (RARESPOTWidget *) check_class_cast([((SPOTAny *) nil_chk(sp->rowHeader_)) getValue], [RARESPOTWidget class]);
    w = [RAREAppleHelper getWidgetWithRAREiWidget:widget withRARESPOTWidget:wc];
    if (w != nil) {
      [v registerOrphanWidgetWithRAREiWidget:w];
      pc = [RAREAppleHelper getScrollComponentWithRAREiWidget:w];
      [bp setLeftViewWithRAREiPlatformComponent:pc];
      [RAREAppleHelper setScrollComponentViewWithRAREiPlatformComponent:fc withRAREView:view withRAREiPlatformComponent:pc withRARELocationEnum:[RARELocationEnum LEFT]];
    }
    [bp setScrollPaneCornersWithRAREaViewer:v withRARESPOTScrollPane:sp];
    c = bp;
  }
  return c;
}

+ (RAREScrollBarView *)createScrollBarViewWithRAREiWidget:(id<RAREiWidget>)w
                                       withSPOTEnumerated:(SPOTEnumerated *)cfg
                                              withBoolean:(BOOL)horizontal {
  int val = [((SPOTEnumerated *) nil_chk(cfg)) intValue];
  RAREScrollBarView *sb = nil;
  if ((val == RARESPOTScrollPane_CVerticalScrollbar_show_as_needed) || (val == RARESPOTScrollPane_CVerticalScrollbar_show_always)) {
    sb = [[RAREScrollBarView alloc] initWithBoolean:horizontal];
    if (val == RARESPOTScrollPane_CVerticalScrollbar_show_always) {
      [sb setShowAlwaysWithBoolean:YES];
    }
    NSString *code = [cfg spot_getAttributeWithNSString:@"onChange"];
    if ((code != nil)) {
      [sb addChangeListenerWithRAREiChangeListener:[[RAREWidgetScriptChangeListener alloc] initWithRAREiWidget:w withId:code]];
    }
  }
  return sb;
}

+ (id<RAREiWidget>)getWidgetWithRAREiWidget:(id<RAREiWidget>)context
                         withRARESPOTWidget:(RARESPOTWidget *)wc {
  if (wc == nil) {
    return nil;
  }
  return [RAREaContainer createWidgetWithRAREiContainer:[((id<RAREiWidget>) nil_chk(context)) getContainerViewer] withRARESPOTWidget:wc];
}

+ (id<RAREiPlatformComponent>)makeScrollPaneWithRAREaViewer:(RAREaViewer *)context
                                     withRARESPOTScrollPane:(RARESPOTScrollPane *)sp
                                 withRAREiPlatformComponent:(id<RAREiPlatformComponent>)content {
  if (sp == nil) {
    sp = RAREAppleHelper_DEFAULT_SCROLLPANE_CONFIG_;
  }
  return [RAREAppleHelper configureScrollPaneWithRAREiWidget:context withRAREiPlatformComponent:content withRAREView:[((id<RAREiPlatformComponent>) nil_chk(content)) getView] withRARESPOTScrollPane:sp];
}

+ (id<RAREiScrollerSupport>)getScrollViewWithRAREiPlatformComponent:(id<RAREiPlatformComponent>)pc {
  RAREView *view = [((id<RAREiPlatformComponent>) nil_chk(pc)) getView];
  id<RAREiScrollerSupport> c;
  if ([view conformsToProtocol: @protocol(RAREiScrollerSupport)]) {
    c = (id<RAREiScrollerSupport>) check_protocol_cast(view, @protocol(RAREiScrollerSupport));
  }
  else {
    c = [[RAREScrollView alloc] init];
    RAREContainer *cc = [[RAREScrollPanePanel alloc] initWithId:c];
    [cc addWithRAREiPlatformComponent:pc withInt:0];
  }
  return c;
}

+ (id<RAREiPlatformComponent>)getScrollComponentWithRAREiWidget:(id<RAREiWidget>)w {
  id<RAREiPlatformComponent> pc = [((id<RAREiWidget>) nil_chk(w)) getContainerComponent];
  RAREView *view = [((id<RAREiPlatformComponent>) nil_chk(pc)) getView];
  id<RAREiPlatformComponent> c;
  if ([view conformsToProtocol: @protocol(RAREiScrollerSupport)]) {
    c = pc;
  }
  else {
    c = [[RAREScrollPanePanel alloc] initWithId:[[RAREScrollView alloc] init]];
    [c setVisibleWithBoolean:[pc isVisible]];
    [c setEnabledWithBoolean:[pc isEnabled]];
    [pc setEnabledWithBoolean:YES];
    [pc setVisibleWithBoolean:YES];
    [RAREAppleHelper addComponentAsWrapperWithRAREaPlatformWidget:(RAREaPlatformWidget *) check_class_cast(w, [RAREaPlatformWidget class]) withRAREScrollPanePanel:(RAREScrollPanePanel *) check_class_cast(c, [RAREScrollPanePanel class])];
  }
  return c;
}

+ (void)addComponentAsWrapperWithRAREaPlatformWidget:(RAREaPlatformWidget *)w
                             withRAREScrollPanePanel:(RAREScrollPanePanel *)c {
  [c  addWithRAREiPlatformComponent:w->formComponent_];
  c->scollPaneWidget_=w;
  w->formComponent_= c;
}

+ (void)setScrollComponentViewWithRAREiPlatformComponent:(id<RAREiPlatformComponent>)fc
                                            withRAREView:(RAREView *)parent
                              withRAREiPlatformComponent:(id<RAREiPlatformComponent>)child
                                    withRARELocationEnum:(RARELocationEnum *)loc {
  switch ([loc ordinal]) {
    case RARELocation_TOP:
    if ([(id) fc isKindOfClass:[RARETableComponent class]]) {
      [((RARETableComponent *) check_class_cast(fc, [RARETableComponent class])) setHeaderViewWithRAREiScrollerSupport:[RAREAppleHelper getScrollViewWithRAREiPlatformComponent:child]];
    }
    else if ([parent isKindOfClass:[RAREScrollView class]]) {
      [((RAREScrollView *) check_class_cast(parent, [RAREScrollView class])) setHeaderViewWithRAREiScrollerSupport:[RAREAppleHelper getScrollViewWithRAREiPlatformComponent:child]];
    }
    else if ([parent isKindOfClass:[RAREaPlatformTableBasedView class]]) {
      [((RAREaPlatformTableBasedView *) check_class_cast(parent, [RAREaPlatformTableBasedView class])) setHeaderViewWithRAREiScrollerSupport:[RAREAppleHelper getScrollViewWithRAREiPlatformComponent:child]];
    }
    break;
    case RARELocation_BOTTOM:
    if ([(id) fc isKindOfClass:[RARETableComponent class]]) {
      [((RARETableComponent *) check_class_cast(fc, [RARETableComponent class])) setFooterViewWithRAREiScrollerSupport:[RAREAppleHelper getScrollViewWithRAREiPlatformComponent:child]];
    }
    else if ([parent isKindOfClass:[RAREScrollView class]]) {
      [((RAREScrollView *) check_class_cast(parent, [RAREScrollView class])) setFooterViewWithRAREiScrollerSupport:[RAREAppleHelper getScrollViewWithRAREiPlatformComponent:child]];
    }
    else if ([parent isKindOfClass:[RAREaPlatformTableBasedView class]]) {
      [((RAREaPlatformTableBasedView *) check_class_cast(parent, [RAREaPlatformTableBasedView class])) setFooterViewWithRAREiScrollerSupport:[RAREAppleHelper getScrollViewWithRAREiPlatformComponent:child]];
    }
    break;
    case RARELocation_LEFT:
    if ([parent isKindOfClass:[RAREScrollView class]]) {
      [((RAREScrollView *) check_class_cast(parent, [RAREScrollView class])) setRowHeaderViewWithRAREiScrollerSupport:[RAREAppleHelper getScrollViewWithRAREiPlatformComponent:child]];
    }
    else if ([parent isKindOfClass:[RAREaPlatformTableBasedView class]]) {
      [((RAREaPlatformTableBasedView *) check_class_cast(parent, [RAREaPlatformTableBasedView class])) setRowHeaderViewWithRAREiScrollerSupport:[RAREAppleHelper getScrollViewWithRAREiPlatformComponent:child]];
    }
    break;
    case RARELocation_RIGHT:
    if ([parent isKindOfClass:[RAREScrollView class]]) {
      [((RAREScrollView *) check_class_cast(parent, [RAREScrollView class])) setRowFooterViewWithRAREiScrollerSupport:[RAREAppleHelper getScrollViewWithRAREiPlatformComponent:child]];
    }
    else if ([parent isKindOfClass:[RAREaPlatformTableBasedView class]]) {
      [((RAREaPlatformTableBasedView *) check_class_cast(parent, [RAREaPlatformTableBasedView class])) setRowFooterViewWithRAREiScrollerSupport:[RAREAppleHelper getScrollViewWithRAREiPlatformComponent:child]];
    }
    break;
    default:
    break;
  }
}

- (id)init {
  return [super init];
}

+ (void)initialize {
  if (self == [RAREAppleHelper class]) {
    RAREAppleHelper_DEFAULT_SCROLLPANE_CONFIG_ = [[RARESPOTScrollPane alloc] init];
  }
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "configureScrollPaneWithRAREiWidget:withRAREiPlatformComponent:withRAREView:withRARESPOTScrollPane:", NULL, "LRAREiPlatformComponent", 0x9, NULL },
    { "createScrollBarViewWithRAREiWidget:withSPOTEnumerated:withBoolean:", NULL, "LRAREScrollBarView", 0x9, NULL },
    { "getWidgetWithRAREiWidget:withRARESPOTWidget:", NULL, "LRAREiWidget", 0x9, NULL },
    { "makeScrollPaneWithRAREaViewer:withRARESPOTScrollPane:withRAREiPlatformComponent:", NULL, "LRAREiPlatformComponent", 0x9, NULL },
    { "getScrollViewWithRAREiPlatformComponent:", NULL, "LRAREiScrollerSupport", 0xa, NULL },
    { "getScrollComponentWithRAREiWidget:", NULL, "LRAREiPlatformComponent", 0xa, NULL },
    { "addComponentAsWrapperWithRAREaPlatformWidget:withRAREScrollPanePanel:", NULL, "V", 0x10a, NULL },
    { "setScrollComponentViewWithRAREiPlatformComponent:withRAREView:withRAREiPlatformComponent:withRARELocationEnum:", NULL, "V", 0xa, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "DEFAULT_SCROLLPANE_CONFIG_", NULL, 0x8, "LRARESPOTScrollPane" },
  };
  static J2ObjcClassInfo _RAREAppleHelper = { "AppleHelper", "com.appnativa.rare.platform.apple.ui.util", NULL, 0x1, 8, methods, 1, fields, 0, NULL};
  return &_RAREAppleHelper;
}

@end
