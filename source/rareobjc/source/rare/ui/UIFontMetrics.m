//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Code/Dev/appNativa/source/rareobjc/../rare/apple/com/appnativa/rare/ui/UIFontMetrics.java
//
//  Created by decoteaud on 9/15/15.
//

#include "com/appnativa/rare/ui/UIDimension.h"
#include "com/appnativa/rare/ui/UIFont.h"
#include "com/appnativa/rare/ui/UIFontMetrics.h"
#if TARGET_OS_IPHONE
#import <UIKit/UIKit.h>
#else
#import <AppKit/AppKit.h>
#endif
#import <CoreText/CoreText.h>

@implementation RAREUIFontMetrics

- (id)initWithRAREUIFont:(RAREUIFont *)font {
  if (self = [super init]) {
    self->font_ = font;
  }
  return self;
}

- (BOOL)isEqual:(id)o {
  if ([o isKindOfClass:[RAREUIFontMetrics class]]) {
    if (o == self) {
      return YES;
    }
    return [((RAREUIFont *) nil_chk(((RAREUIFontMetrics *) nil_chk(o))->font_)) isEqual:font_];
  }
  return NO;
}

- (int)stringWidthWithNSString:(NSString *)text {
  #if TARGET_OS_IPHONE
  UIFont* font=(UIFont*)[font_ getIOSProxy];
  return (int)[text sizeWithFont:font].width;
  #else
  NSFont* font=(NSFont*)font_->proxy_;
  NSDictionary* att=[[font fontDescriptor] fontAttributes];
  return (int)[text sizeWithAttributes:att].width;
  #endif
}

- (RAREUIDimension *)stringSizeWithNSString:(NSString *)text
                        withRAREUIDimension:(RAREUIDimension *)size {
  if(size==nil)  {
    size=[[RAREUIDimension alloc]init];
  }
  #if TARGET_OS_IPHONE
  UIFont* font=(UIFont*)[font_ getIOSProxy];
  CGSize s=[text sizeWithFont:font];
  #else
  NSFont* font=(NSFont*)font_->proxy_;
  NSDictionary* att=[[font fontDescriptor] fontAttributes];
  NSSize s=[text sizeWithAttributes:att];
  #endif
  size->width_=(int)s.width;
  size->height_=(int)s.height;
  return size;
}

- (void)setFontWithRAREUIFont:(RAREUIFont *)font {
  self->font_ = font;
}

- (float)getAscent {
  return CTFontGetAscent((__bridge CTFontRef)font_->proxy_);
}

- (float)getDescent {
  return CTFontGetDescent((__bridge CTFontRef)font_->proxy_);
}

- (RAREUIFont *)getFont {
  return font_;
}

- (float)getHeight {
  CTFontRef f=(__bridge CTFontRef)font_->proxy_;
  return CTFontGetLeading(f)+CTFontGetDescent(f)+CTFontGetAscent(f);
}

- (float)getLeading {
  CTFontRef f=(__bridge CTFontRef)font_->proxy_;
  return CTFontGetLeading(f);
}

+ (RAREUIFontMetrics *)getMetricsWithRAREUIFont:(RAREUIFont *)font {
  return [[RAREUIFontMetrics alloc] initWithRAREUIFont:font];
}

- (void)copyAllFieldsTo:(RAREUIFontMetrics *)other {
  [super copyAllFieldsTo:other];
  other->font_ = font_;
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "stringWidthWithNSString:", NULL, "I", 0x101, NULL },
    { "stringSizeWithNSString:withRAREUIDimension:", NULL, "LRAREUIDimension", 0x101, NULL },
    { "getAscent", NULL, "F", 0x101, NULL },
    { "getDescent", NULL, "F", 0x101, NULL },
    { "getFont", NULL, "LRAREUIFont", 0x1, NULL },
    { "getHeight", NULL, "F", 0x101, NULL },
    { "getLeading", NULL, "F", 0x101, NULL },
    { "getMetricsWithRAREUIFont:", NULL, "LRAREUIFontMetrics", 0x9, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "font_", NULL, 0x0, "LRAREUIFont" },
  };
  static J2ObjcClassInfo _RAREUIFontMetrics = { "UIFontMetrics", "com.appnativa.rare.ui", NULL, 0x1, 8, methods, 1, fields, 0, NULL};
  return &_RAREUIFontMetrics;
}

@end
