//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Code/Dev/appNativa/source/rareobjc/../rare/core/com/appnativa/rare/ui/aUICompoundIcon.java
//
//  Created by decoteaud on 12/8/15.
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "com/appnativa/rare/ui/UICompoundIcon.h"
#include "com/appnativa/rare/ui/UIPoint.h"
#include "com/appnativa/rare/ui/aUICompoundIcon.h"
#include "com/appnativa/rare/ui/iPlatformGraphics.h"
#include "com/appnativa/rare/ui/iPlatformIcon.h"
#include "com/appnativa/util/iCancelable.h"
#include "java/lang/CloneNotSupportedException.h"
#include "java/lang/InternalError.h"
#include "java/lang/Math.h"

@implementation RAREaUICompoundIcon

- (id)init {
  if (self = [super init]) {
    iconHeight_ = -1;
    iconWidth_ = -1;
    composite_ = YES;
  }
  return self;
}

- (id)initRAREaUICompoundIconWithRAREiPlatformIconArray:(IOSObjectArray *)icons {
  if (self = [super init]) {
    iconHeight_ = -1;
    iconWidth_ = -1;
    composite_ = YES;
    self->icons_ = icons;
  }
  return self;
}

- (id)initWithRAREiPlatformIconArray:(IOSObjectArray *)icons {
  return [self initRAREaUICompoundIconWithRAREiPlatformIconArray:icons];
}

- (id)initWithRAREiPlatformIcon:(id<RAREiPlatformIcon>)firstIcon
          withRAREiPlatformIcon:(id<RAREiPlatformIcon>)secondIcon {
  return [self initRAREaUICompoundIconWithRAREiPlatformIconArray:[IOSObjectArray arrayWithObjects:(id[]){ firstIcon, secondIcon } count:2 type:[IOSClass classWithProtocol:@protocol(RAREiPlatformIcon)]]];
}

- (void)cancelWithBoolean:(BOOL)canInterrupt {
  {
    IOSObjectArray *a__ = icons_;
    id const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    id const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      id<RAREiPlatformIcon> ic = (*b__++);
      if ([(id) ic conformsToProtocol: @protocol(RAREUTiCancelable)]) {
        [((id<RAREUTiCancelable>) check_protocol_cast(ic, @protocol(RAREUTiCancelable))) cancelWithBoolean:canInterrupt];
      }
    }
  }
}

- (id)clone {
  @try {
    return [super clone];
  }
  @catch (JavaLangCloneNotSupportedException *ex) {
    @throw [[JavaLangInternalError alloc] initWithNSString:[((JavaLangCloneNotSupportedException *) nil_chk(ex)) description]];
  }
}

+ (RAREUICompoundIcon *)createWithRAREiPlatformIconArray:(IOSObjectArray *)icons {
  return [[RAREUICompoundIcon alloc] initWithRAREiPlatformIconArray:icons];
}

- (void)paintWithRAREiPlatformGraphics:(id<RAREiPlatformGraphics>)g
                             withFloat:(float)x
                             withFloat:(float)y
                             withFloat:(float)width
                             withFloat:(float)height {
  float xx;
  float yy;
  float w;
  float h;
  int len = (int) [((IOSObjectArray *) nil_chk(icons_)) count];
  for (int i = 0; i < len; i++) {
    id<RAREiPlatformIcon> icon = IOSObjectArray_Get(icons_, i);
    RAREUIPoint *p = (iconLocations_ != nil) ? IOSObjectArray_Get(iconLocations_, i) : nil;
    if (icon != nil) {
      xx = x;
      yy = y;
      w = width;
      h = height;
      if (p != nil) {
        xx += p->x_;
        yy += p->y_;
        w -= p->y_;
        h -= p->y_;
      }
      [icon paintWithRAREiPlatformGraphics:g withFloat:xx withFloat:yy withFloat:w withFloat:h];
    }
  }
}

- (void)setFirstIconWithRAREiPlatformIcon:(id<RAREiPlatformIcon>)icon {
  (void) IOSObjectArray_Set(nil_chk(icons_), 0, icon);
}

- (void)setFirstIconLocationWithInt:(int)x
                            withInt:(int)y {
  if (iconLocations_ == nil) {
    iconLocations_ = [IOSObjectArray arrayWithLength:(int) [((IOSObjectArray *) nil_chk(icons_)) count] type:[IOSClass classWithClass:[RAREUIPoint class]]];
  }
  (void) IOSObjectArray_Set(nil_chk(iconLocations_), 0, [[RAREUIPoint alloc] initWithFloat:x withFloat:y]);
}

- (void)setIconHeightWithInt:(int)iconHeight {
  self->iconHeight_ = iconHeight;
}

- (void)setIconWidthWithInt:(int)iconWidth {
  self->iconWidth_ = iconWidth;
}

- (void)setLinkedDataWithId:(id)linkedData {
  self->linkedData_ = linkedData;
}

- (void)setSecondIconWithRAREiPlatformIcon:(id<RAREiPlatformIcon>)icon {
  (void) IOSObjectArray_Set(nil_chk(icons_), 1, icon);
}

- (void)setSecondIconLocationWithInt:(int)x
                             withInt:(int)y {
  if (iconLocations_ == nil) {
    iconLocations_ = [IOSObjectArray arrayWithLength:(int) [((IOSObjectArray *) nil_chk(icons_)) count] type:[IOSClass classWithClass:[RAREUIPoint class]]];
  }
  (void) IOSObjectArray_Set(nil_chk(iconLocations_), 1, [[RAREUIPoint alloc] initWithFloat:x withFloat:y]);
}

- (void)alignSideBySideWithBoolean:(BOOL)horizontal
                           withInt:(int)gap
                       withBoolean:(BOOL)center {
  self->horizontal_ = horizontal;
  self->composite_ = NO;
  int len = (int) [((IOSObjectArray *) nil_chk(icons_)) count];
  if (iconLocations_ == nil) {
    iconLocations_ = [IOSObjectArray arrayWithLength:len type:[IOSClass classWithClass:[RAREUIPoint class]]];
  }
  int n = 0;
  iconWidth_ = [self getIconWidth];
  iconHeight_ = [self getIconHeight];
  for (int i = 0; i < len; i++) {
    id<RAREiPlatformIcon> ic = IOSObjectArray_Get(icons_, i);
    if (horizontal) {
      (void) IOSObjectArray_Set(nil_chk(iconLocations_), i, [[RAREUIPoint alloc] initWithFloat:n withFloat:0]);
      n += [((id<RAREiPlatformIcon>) nil_chk(ic)) getIconWidth];
      if (center) {
        ((RAREUIPoint *) nil_chk(IOSObjectArray_Get(iconLocations_, i)))->y_ = (iconHeight_ - [ic getIconHeight]) / 2;
      }
      n += gap;
    }
    else {
      (void) IOSObjectArray_Set(nil_chk(iconLocations_), i, [[RAREUIPoint alloc] initWithFloat:0 withFloat:n]);
      if (center) {
        ((RAREUIPoint *) nil_chk(IOSObjectArray_Get(iconLocations_, i)))->x_ = (iconWidth_ - [((id<RAREiPlatformIcon>) nil_chk(ic)) getIconWidth]) / 2;
      }
      n += [((id<RAREiPlatformIcon>) nil_chk(ic)) getIconHeight];
      n += gap;
    }
  }
  if (horizontal) {
    iconWidth_ += gap * (len - 1);
  }
  else {
    iconHeight_ += gap * (len - 1);
  }
}

- (id<RAREiPlatformIcon>)getDisabledVersion {
  if (disabledIcon_ == nil) {
    RAREaUICompoundIcon *b = (RAREaUICompoundIcon *) check_class_cast([self clone], [RAREaUICompoundIcon class]);
    disabledIcon_ = b;
    int len = (int) [((IOSObjectArray *) nil_chk(icons_)) count];
    for (int i = 0; i < len; i++) {
      id<RAREiPlatformIcon> ic = IOSObjectArray_Get(icons_, i);
      (void) IOSObjectArray_Set(((RAREaUICompoundIcon *) nil_chk(b))->icons_, i, (ic == nil) ? nil : [ic getDisabledVersion]);
    }
  }
  return disabledIcon_;
}

- (id<RAREiPlatformIcon>)getFirstIcon {
  return IOSObjectArray_Get(nil_chk(icons_), 0);
}

- (RAREUIPoint *)getFirstIconLocation {
  return (iconLocations_ == nil) ? nil : IOSObjectArray_Get(iconLocations_, 0);
}

- (int)getIconHeight {
  if (iconHeight_ != -1) {
    return iconHeight_;
  }
  int h = 0;
  {
    IOSObjectArray *a__ = icons_;
    id const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    id const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      id<RAREiPlatformIcon> ic = (*b__++);
      if (ic != nil) {
        if (horizontal_ || composite_) {
          h = [JavaLangMath maxWithInt:h withInt:[ic getIconHeight]];
        }
        else {
          h += [ic getIconHeight];
        }
      }
    }
  }
  return h;
}

- (int)getIconWidth {
  if (iconWidth_ != -1) {
    return iconWidth_;
  }
  int w = 0;
  {
    IOSObjectArray *a__ = icons_;
    id const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    id const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      id<RAREiPlatformIcon> ic = (*b__++);
      if (ic != nil) {
        if (horizontal_) {
          w += [ic getIconWidth];
        }
        else {
          w = [JavaLangMath maxWithInt:w withInt:[ic getIconWidth]];
        }
      }
    }
  }
  return w;
}

- (id)getLinkedData {
  return linkedData_;
}

- (id<RAREiPlatformIcon>)getSecondIcon {
  return IOSObjectArray_Get(nil_chk(icons_), 1);
}

- (RAREUIPoint *)getSecondIconLocation {
  return (iconLocations_ == nil) ? nil : IOSObjectArray_Get(iconLocations_, 0);
}

- (BOOL)isCanceled {
  {
    IOSObjectArray *a__ = icons_;
    id const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    id const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      id<RAREiPlatformIcon> ic = (*b__++);
      if ([(id) ic conformsToProtocol: @protocol(RAREUTiCancelable)]) {
        return [((id<RAREUTiCancelable>) check_protocol_cast(ic, @protocol(RAREUTiCancelable))) isCanceled];
      }
    }
  }
  return NO;
}

- (BOOL)isDone {
  {
    IOSObjectArray *a__ = icons_;
    id const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    id const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      id<RAREiPlatformIcon> ic = (*b__++);
      if ([(id) ic conformsToProtocol: @protocol(RAREUTiCancelable)]) {
        if (![((id<RAREUTiCancelable>) check_protocol_cast(ic, @protocol(RAREUTiCancelable))) isDone]) {
          return NO;
        }
      }
    }
  }
  return YES;
}

- (BOOL)isHorizontal {
  return horizontal_;
}

- (void)setHorizontalWithBoolean:(BOOL)horizontal {
  self->horizontal_ = horizontal;
}

- (id)copyWithZone:(NSZone *)zone {
  return [self clone];
}

- (void)copyAllFieldsTo:(RAREaUICompoundIcon *)other {
  [super copyAllFieldsTo:other];
  other->composite_ = composite_;
  other->disabledIcon_ = disabledIcon_;
  other->horizontal_ = horizontal_;
  other->iconHeight_ = iconHeight_;
  other->iconLocations_ = iconLocations_;
  other->iconWidth_ = iconWidth_;
  other->icons_ = icons_;
  other->linkedData_ = linkedData_;
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "clone", NULL, "LNSObject", 0x1, NULL },
    { "createWithRAREiPlatformIconArray:", NULL, "LRAREUICompoundIcon", 0x89, NULL },
    { "getDisabledVersion", NULL, "LRAREiPlatformIcon", 0x1, NULL },
    { "getFirstIcon", NULL, "LRAREiPlatformIcon", 0x1, NULL },
    { "getFirstIconLocation", NULL, "LRAREUIPoint", 0x1, NULL },
    { "getLinkedData", NULL, "LNSObject", 0x1, NULL },
    { "getSecondIcon", NULL, "LRAREiPlatformIcon", 0x1, NULL },
    { "getSecondIconLocation", NULL, "LRAREUIPoint", 0x1, NULL },
    { "isCanceled", NULL, "Z", 0x1, NULL },
    { "isDone", NULL, "Z", 0x1, NULL },
    { "isHorizontal", NULL, "Z", 0x1, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "iconHeight_", NULL, 0x4, "I" },
    { "iconWidth_", NULL, 0x4, "I" },
    { "disabledIcon_", NULL, 0x4, "LRAREiPlatformIcon" },
    { "iconLocations_", NULL, 0x4, "LIOSObjectArray" },
    { "icons_", NULL, 0x4, "LIOSObjectArray" },
    { "linkedData_", NULL, 0x4, "LNSObject" },
    { "composite_", NULL, 0x4, "Z" },
  };
  static J2ObjcClassInfo _RAREaUICompoundIcon = { "aUICompoundIcon", "com.appnativa.rare.ui", NULL, 0x401, 11, methods, 7, fields, 0, NULL};
  return &_RAREaUICompoundIcon;
}

@end
