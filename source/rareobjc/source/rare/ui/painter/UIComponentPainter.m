//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Code/Dev/appNativa/source/rareobjc/../rare/apple/com/appnativa/rare/ui/painter/UIComponentPainter.java
//
//  Created by decoteaud on 3/11/16.
//

#include "com/appnativa/rare/platform/apple/ui/view/View.h"
#include "com/appnativa/rare/platform/apple/ui/view/aView.h"
#include "com/appnativa/rare/ui/UIColor.h"
#include "com/appnativa/rare/ui/Utils.h"
#include "com/appnativa/rare/ui/iPaintedButton.h"
#include "com/appnativa/rare/ui/iPlatformBorder.h"
#include "com/appnativa/rare/ui/iPlatformComponent.h"
#include "com/appnativa/rare/ui/painter/PaintBucket.h"
#include "com/appnativa/rare/ui/painter/PainterHolder.h"
#include "com/appnativa/rare/ui/painter/UIComponentPainter.h"
#include "com/appnativa/rare/ui/painter/aUIComponentPainter.h"
#include "com/appnativa/rare/ui/painter/iBackgroundPainter.h"
#include "com/appnativa/rare/ui/painter/iComponentPainter.h"
#include "com/appnativa/rare/ui/painter/iImagePainter.h"
#include "com/appnativa/rare/ui/painter/iPlatformComponentPainter.h"
#include "com/appnativa/rare/ui/painter/iPlatformPainter.h"

@implementation RAREUIComponentPainter

- (id)init {
  return [super init];
}

- (void)updateForStateWithRAREaView:(RAREaView *)v {
  RAREPainterHolder *ph = painterHolder_;
  if (ph != nil) {
    BOOL selected = [((RAREaView *) nil_chk(v)) isSelected];
    BOOL pressed = [v isPressed];
    BOOL enabled = [v isEnabled];
    BOOL mouseOver = [v isMouseOver];
    RAREiPaintedButton_ButtonStateEnum *state = [RAREUtils getStateWithBoolean:enabled withBoolean:pressed withBoolean:selected withBoolean:mouseOver];
    id<RAREiPlatformBorder> b = [ph getBorderWithRAREiPaintedButton_ButtonStateEnum:state];
    if (b == nil) {
      b = [v isUsePainterBorder] ? border_ : nil;
    }
    id<RAREiBackgroundPainter> bp = [ph getBackgroundPainterWithRAREiPaintedButton_ButtonStateEnum:state];
    RAREUIColor *bg = [ph getBackgroundWithRAREiPaintedButton_ButtonStateEnum:state];
    if (bp == nil) {
      bp = backgroundPainter_;
    }
    [v setBorderWithRAREiPlatformBorder:b];
    if ((bp == nil) && (bg != nil)) {
      [v setBackgroundColorExWithRAREUIColor:bg];
    }
    [v setBackgroundPainterWithRAREiBackgroundPainter:bp];
  }
}

+ (BOOL)isOkToPaintWithRAREiPlatformComponent:(id<RAREiPlatformComponent>)c
                      withRAREiPlatformBorder:(id<RAREiPlatformBorder>)border {
  if (c == nil) {
    return YES;
  }
  if (![((RAREView *) nil_chk([((id<RAREiPlatformComponent>) nil_chk(c)) getView])) letComponentPainterPaintWithRAREiPlatformBorder:border]) {
    return NO;
  }
  return ![((id<RAREiPlatformBorder>) nil_chk(border)) canUseMainLayer] && ![border usesPath];
}

+ (BOOL)isOkToPaintWithRAREiPlatformComponent:(id<RAREiPlatformComponent>)c
                     withRAREiPlatformPainter:(id<RAREiPlatformPainter>)p {
  return [RAREUIComponentPainter isOkToPaintWithRAREiPlatformComponent:c withRAREiPlatformPainter:p withBoolean:YES withBoolean:NO];
}

+ (BOOL)isOkToPaintWithRAREiPlatformComponent:(id<RAREiPlatformComponent>)c
                     withRAREiPlatformPainter:(id<RAREiPlatformPainter>)p
                                  withBoolean:(BOOL)hasValue
                                  withBoolean:(BOOL)isOverlay {
  if (c == nil) {
    return YES;
  }
  if (![RAREaUIComponentPainter isOkToPaintWithRAREiPlatformComponent:c withRAREiPlatformPainter:p withBoolean:hasValue withBoolean:isOverlay]) {
    return NO;
  }
  if ([((RAREView *) nil_chk([((id<RAREiPlatformComponent>) nil_chk(c)) getView])) letComponentPainterPaintWithRAREiPlatformPainter:p]) {
    return YES;
  }
  if ([((id<RAREiPlatformPainter>) nil_chk(p)) canUseLayer] && [((RAREView *) nil_chk([c getView])) isUseMainLayerForPainter]) {
    return NO;
  }
  return YES;
}

- (RAREUIColor *)getBackgroundColorEx {
  return [self getBackgroundColor];
}

- (void)updateModCount {
  modCount_++;
  if (backgroundPainter_ != nil) {
    [backgroundPainter_ updateModCount];
  }
  if (overlayPainter_ != nil) {
    [overlayPainter_ updateModCount];
  }
  if (border_ != nil) {
    [border_ updateModCount];
  }
  if (bgOverlayPainter_ != nil) {
    [bgOverlayPainter_ updateModCount];
  }
  if (painterHolder_ != nil) {
    [RAREUIComponentPainter updatePainterHolderModCountWithRAREPainterHolder:painterHolder_];
  }
}

+ (void)updatePainterHolderModCountWithRAREPainterHolder:(RAREPainterHolder *)ph {
  if (ph != nil) {
    if (ph->normalPainter_ != nil) {
      [RAREUIComponentPainter updateBucketModCountWithRAREPaintBucket:ph->normalPainter_];
    }
    if (ph->pressedPainter_ != nil) {
      [RAREUIComponentPainter updateBucketModCountWithRAREPaintBucket:ph->pressedPainter_];
    }
    if (ph->selectedPainter_ != nil) {
      [RAREUIComponentPainter updateBucketModCountWithRAREPaintBucket:ph->selectedPainter_];
    }
    if (ph->disabledPainter_ != nil) {
      [RAREUIComponentPainter updateBucketModCountWithRAREPaintBucket:ph->disabledPainter_];
    }
    if (ph->disabledSelectedPainter_ != nil) {
      [RAREUIComponentPainter updateBucketModCountWithRAREPaintBucket:ph->disabledSelectedPainter_];
    }
    if (ph->rolloverPainter_ != nil) {
      [RAREUIComponentPainter updateBucketModCountWithRAREPaintBucket:ph->rolloverPainter_];
    }
  }
}

+ (void)updateBucketModCountWithRAREPaintBucket:(RAREPaintBucket *)pb {
  id<RAREiComponentPainter> cp = (pb == nil) ? nil : [pb getCachedComponentPainterEx];
  if (cp != nil) {
    [cp updateModCount];
    return;
  }
  if (pb != nil) {
    id<RAREiBackgroundPainter> p = [pb getBackgroundPainter];
    if (p != nil) {
      [p updateModCount];
    }
    id<RAREiImagePainter> ip = [pb getImagePainter];
    if (ip != nil) {
      [ip updateModCount];
    }
    id<RAREiPlatformBorder> b = [pb getBorder];
    if (b != nil) {
      [b updateModCount];
    }
  }
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "isOkToPaintWithRAREiPlatformComponent:withRAREiPlatformBorder:", NULL, "Z", 0x9, NULL },
    { "isOkToPaintWithRAREiPlatformComponent:withRAREiPlatformPainter:", NULL, "Z", 0x9, NULL },
    { "isOkToPaintWithRAREiPlatformComponent:withRAREiPlatformPainter:withBoolean:withBoolean:", NULL, "Z", 0x9, NULL },
    { "getBackgroundColorEx", NULL, "LRAREUIColor", 0x1, NULL },
  };
  static J2ObjcClassInfo _RAREUIComponentPainter = { "UIComponentPainter", "com.appnativa.rare.ui.painter", NULL, 0x1, 4, methods, 0, NULL, 0, NULL};
  return &_RAREUIComponentPainter;
}

@end
