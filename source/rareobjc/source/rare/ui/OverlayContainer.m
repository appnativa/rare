//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Code/Dev/appNativa/source/rareobjc/../rare/core/com/appnativa/rare/ui/OverlayContainer.java
//
//  Created by decoteaud on 3/11/16.
//

#include "com/appnativa/rare/platform/PlatformHelper.h"
#include "com/appnativa/rare/platform/apple/ui/view/View.h"
#include "com/appnativa/rare/ui/Component.h"
#include "com/appnativa/rare/ui/Container.h"
#include "com/appnativa/rare/ui/OverlayContainer.h"
#include "com/appnativa/rare/ui/UIDimension.h"
#include "com/appnativa/rare/ui/UIRectangle.h"
#include "com/appnativa/rare/ui/aComponent.h"
#include "com/appnativa/rare/ui/iPlatformComponent.h"
#include "com/appnativa/util/IdentityArrayList.h"

@implementation RAREOverlayContainer

- (id)initWithRAREiPlatformComponent:(id<RAREiPlatformComponent>)mainComponent {
  if (self = [super initWithId:[RAREaPlatformHelper createGlassViewWithBoolean:YES]]) {
    managedOverlays_ = [[RAREUTIdentityArrayList alloc] initWithInt:2];
    [self setBoundsWithRAREUIRectangle:[((id<RAREiPlatformComponent>) nil_chk(mainComponent)) getBounds]];
    [self setMainComponentWithRAREiPlatformComponent:mainComponent];
  }
  return self;
}

- (void)addManagedOverlayWithRAREiPlatformComponent:(id<RAREiPlatformComponent>)c {
  if (c != nil) {
    [self addOverlayWithRAREiPlatformComponent:c];
    [((RAREUTIdentityArrayList *) nil_chk(managedOverlays_)) addIfNotPresentWithId:c];
    RAREUIDimension *size = [self getSize];
    [c setBoundsWithFloat:0 withFloat:0 withFloat:((RAREUIDimension *) nil_chk(size))->width_ withFloat:size->height_];
  }
}

- (void)addOverlayWithRAREiPlatformComponent:(id<RAREiPlatformComponent>)c {
  if (c != nil) {
    [self addWithRAREiPlatformComponent:c];
    [c bringToFront];
  }
}

- (void)updateManagedOverlays {
  RAREUIDimension *size = [self getSize];
  if (mainComponent_ != nil) {
    [mainComponent_ setBoundsWithFloat:0 withFloat:0 withFloat:((RAREUIDimension *) nil_chk(size))->width_ withFloat:size->height_];
  }
  if (![((RAREUTIdentityArrayList *) nil_chk(managedOverlays_)) isEmpty]) {
    for (id<RAREiPlatformComponent> __strong c in managedOverlays_) {
      [((id<RAREiPlatformComponent>) nil_chk(c)) setBoundsWithFloat:0 withFloat:0 withFloat:((RAREUIDimension *) nil_chk(size))->width_ withFloat:size->height_];
    }
  }
}

- (id<RAREiPlatformComponent>)getMainComponent {
  return mainComponent_;
}

- (void)setBoundsWithInt:(int)x
                 withInt:(int)y
                 withInt:(int)width
                 withInt:(int)height {
  [super setBoundsWithInt:x withInt:y withInt:width withInt:height];
  [self updateManagedOverlays];
}

- (void)removeOverlayWithRAREiPlatformComponent:(id<RAREiPlatformComponent>)c {
  [self removeWithRAREiPlatformComponent:c];
}

- (void)removeWithRAREiPlatformComponent:(id<RAREiPlatformComponent>)c {
  if (c != nil) {
    [((RAREUTIdentityArrayList *) nil_chk(managedOverlays_)) removeWithId:c];
    [super removeWithRAREiPlatformComponent:c];
  }
}

- (void)removeAll {
  [super removeAll];
  [((RAREUTIdentityArrayList *) nil_chk(managedOverlays_)) clear];
}

- (void)setMainComponentWithRAREiPlatformComponent:(id<RAREiPlatformComponent>)mainComponent {
  if (self->mainComponent_ != mainComponent) {
    if (self->mainComponent_ != nil) {
      [self removeWithRAREiPlatformComponent:self->mainComponent_];
    }
    self->mainComponent_ = mainComponent;
    if (mainComponent != nil) {
      RAREUIDimension *size = [self getSize];
      [mainComponent setBoundsWithFloat:0 withFloat:0 withFloat:((RAREUIDimension *) nil_chk(size))->width_ withFloat:size->height_];
      [mainComponent removeFromParent];
      [self addWithRAREiPlatformComponent:mainComponent];
    }
  }
}

- (void)copyAllFieldsTo:(RAREOverlayContainer *)other {
  [super copyAllFieldsTo:other];
  other->mainComponent_ = mainComponent_;
  other->managedOverlays_ = managedOverlays_;
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "initWithRAREiPlatformComponent:", NULL, NULL, 0x0, NULL },
    { "getMainComponent", NULL, "LRAREiPlatformComponent", 0x1, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "managedOverlays_", NULL, 0x4, "LRAREUTIdentityArrayList" },
  };
  static J2ObjcClassInfo _RAREOverlayContainer = { "OverlayContainer", "com.appnativa.rare.ui", NULL, 0x1, 2, methods, 1, fields, 0, NULL};
  return &_RAREOverlayContainer;
}

@end
