//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Code/Dev/appNativa/source/rareobjc/../rare/core/com/appnativa/rare/ui/aLinearPanel.java
//
//  Created by decoteaud on 9/15/15.
//

#include "IOSClass.h"
#include "com/appnativa/rare/iConstants.h"
#include "com/appnativa/rare/platform/PlatformHelper.h"
#include "com/appnativa/rare/ui/Container.h"
#include "com/appnativa/rare/ui/aFormsPanel.h"
#include "com/appnativa/rare/ui/aLinearPanel.h"
#include "com/appnativa/rare/ui/iFormsPanel.h"
#include "com/appnativa/rare/ui/iPlatformComponent.h"
#include "com/jgoodies/forms/layout/CellConstraints.h"
#include "java/lang/Boolean.h"
#include "java/util/ArrayList.h"
#include "java/util/Collections.h"

@implementation RAREaLinearPanel

- (id)initWithBoolean:(BOOL)horizontal {
  if (self = [super init]) {
    self->horizontal_ = horizontal;
  }
  return self;
}

- (void)addComponentWithRAREiPlatformComponent:(id<RAREiPlatformComponent>)comp {
  [self addComponentWithRAREiPlatformComponent:comp withNSString:nil];
}

- (void)addComponentWithRAREiPlatformComponent:(id<RAREiPlatformComponent>)comp
                                  withNSString:(NSString *)spec {
  if (!firstComponentAdded_) {
    firstComponentAdded_ = YES;
    if ([self getComponentCount] == 0) {
      [self addFirstComponentWithRAREiPlatformComponent:comp withNSString:spec];
      return;
    }
  }
  if ((spec == nil) && [((JavaLangBoolean *) nil_chk([JavaLangBoolean getTRUE])) isEqual:[((id<RAREiPlatformComponent>) nil_chk(comp)) getClientPropertyWithNSString:[RAREiConstants MENU_EXPANSION_NAME]]]) {
    spec = @"FILL:DEFAULT:GROW";
  }
  if (horizontal_) {
    if ((spacing_ > 0) && ([self getColumnCount] == 0)) {
      [self addSpacerColumnWithInt:spacing_];
    }
    [self addComponentWithRAREiPlatformComponent:comp withInt:[self addColumnWithInt:-1 withNSString:(spec == nil) ? colSpec_ : spec] withInt:0];
    if (spacing_ > 0) {
      [self addSpacerColumnWithInt:spacing_];
    }
  }
  else {
    if ((spacing_ > 0) && ([self getColumnCount] == 0)) {
      [self addSpacerRowWithInt:spacing_];
    }
    [self addComponentWithRAREiPlatformComponent:comp withInt:0 withInt:[self addRowWithInt:-1 withNSString:(spec == nil) ? rowSpec_ : spec]];
    if (spacing_ > 0) {
      [self addSpacerRowWithInt:spacing_];
    }
  }
}

- (void)setSpecsWithBoolean:(BOOL)horizontal
               withNSString:(NSString *)rspec
               withNSString:(NSString *)cspec {
  originalRowSpec_ = rspec;
  originalColSpec_ = cspec;
  if (rspec == nil) {
    if (horizontal) {
      rspec = @"FILL:DEFAULT:GROW";
    }
    else {
      rspec = @"FILL:DEFAULT:NONE";
    }
  }
  if (cspec == nil) {
    if (horizontal) {
      cspec = @"FILL:DEFAULT:NONE";
    }
    else {
      cspec = @"FILL:DEFAULT:GROW";
    }
  }
  rowSpec_ = rspec;
  colSpec_ = cspec;
}

- (void)addExpansionComponent {
  [self addComponentWithRAREiPlatformComponent:[RAREaPlatformHelper createSpacerComponentWithRAREiPlatformComponent:self] withNSString:@"FILL:DEFAULT:GROW"];
}

- (void)addSeparatorComponent {
  [self addComponentWithRAREiPlatformComponent:[RAREaPlatformHelper createSeparatorComponentWithRAREiPlatformComponent:self]];
}

- (void)removeWithRAREiPlatformComponent:(id<RAREiPlatformComponent>)c {
  if (c != nil) {
    RAREJGCellConstraints *cc = [self getCellConstraintsWithRAREiPlatformComponent:c];
    [super removeWithRAREiPlatformComponent:c];
    if (cc != nil) {
      int row = cc->gridY_ - 1;
      int col = cc->gridX_ - 1;
      if (horizontal_) {
        if (spacing_ > 0) {
          [self removeColumnWithInt:col];
        }
        [self removeColumnWithInt:col];
      }
      else {
        if (spacing_ > 0) {
          [self removeRowWithInt:row];
        }
        [self removeRowWithInt:row];
      }
    }
  }
}

- (void)setColumnSpecWithNSString:(NSString *)spec {
  colSpec_ = spec;
}

- (void)setHorizontalWithBoolean:(BOOL)horizontal {
  if (self->horizontal_ != horizontal) {
    self->horizontal_ = horizontal;
    int len = [self getComponentCount];
    if (len != 0) {
      JavaUtilArrayList *list = [[JavaUtilArrayList alloc] initWithInt:len];
      [self getComponentsWithJavaUtilList:list];
      [self removeAll];
      firstComponentAdded_ = NO;
      NSString *c = (originalRowSpec_ == nil) ? rowSpec_ : originalRowSpec_;
      NSString *r = (originalColSpec_ == nil) ? colSpec_ : originalColSpec_;
      [self setSpecsWithBoolean:horizontal withNSString:r withNSString:c];
      [self updateFormLayout];
      for (int i = 0; i < len; i++) {
        [self addComponentWithRAREiPlatformComponent:[list getWithInt:i]];
      }
    }
  }
}

- (void)setRowSpecWithNSString:(NSString *)spec {
  rowSpec_ = spec;
}

- (void)setSpacingWithInt:(int)spacing {
  if (self->spacing_ != spacing) {
    self->spacing_ = spacing;
    int len = [self getComponentCount];
    if (len != 0) {
      JavaUtilArrayList *list = [[JavaUtilArrayList alloc] initWithInt:len];
      [self getComponentsWithJavaUtilList:list];
      [self removeAll];
      for (int i = 0; i < len; i++) {
        [self addComponentWithRAREiPlatformComponent:[list getWithInt:i]];
      }
    }
  }
}

- (int)getSpacing {
  return spacing_;
}

- (BOOL)isHorizontal {
  return horizontal_;
}

- (void)updateFormLayout {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (void)addFirstComponentWithRAREiPlatformComponent:(id<RAREiPlatformComponent>)comp
                                       withNSString:(NSString *)spec {
  firstComponentAdded_ = YES;
  if ((spec == nil) && [((JavaLangBoolean *) nil_chk([JavaLangBoolean getTRUE])) isEqual:[((id<RAREiPlatformComponent>) nil_chk(comp)) getClientPropertyWithNSString:[RAREiConstants MENU_EXPANSION_NAME]]]) {
    spec = @"FILL:DEFAULT:GROW";
  }
  if (spec != nil) {
    if (horizontal_) {
      [self setColumnSpecWithInt:0 withNSString:spec];
    }
    else {
      [self setRowSpecWithInt:0 withNSString:spec];
    }
  }
  [self addComponentWithRAREiPlatformComponent:comp withInt:0 withInt:0];
  if (self->spacing_ > 0) {
    int sp = self->spacing_;
    self->spacing_ = 0;
    [self setSpacingWithInt:sp];
  }
}

- (void)reverseComponentOrder {
  int len = [self getComponentCount];
  if (len != 0) {
    JavaUtilArrayList *list = [[JavaUtilArrayList alloc] initWithInt:len];
    [self getComponentsWithJavaUtilList:list];
    [self removeAll];
    [JavaUtilCollections reverseWithJavaUtilList:list];
    firstComponentAdded_ = NO;
    NSString *r = (originalRowSpec_ == nil) ? rowSpec_ : originalRowSpec_;
    NSString *c = (originalColSpec_ == nil) ? colSpec_ : originalColSpec_;
    [self setSpecsWithBoolean:horizontal_ withNSString:r withNSString:c];
    [self updateFormLayout];
    for (int i = 0; i < len; i++) {
      [self addComponentWithRAREiPlatformComponent:[list getWithInt:i]];
    }
  }
}

- (void)copyAllFieldsTo:(RAREaLinearPanel *)other {
  [super copyAllFieldsTo:other];
  other->colSpec_ = colSpec_;
  other->firstComponentAdded_ = firstComponentAdded_;
  other->horizontal_ = horizontal_;
  other->originalColSpec_ = originalColSpec_;
  other->originalRowSpec_ = originalRowSpec_;
  other->rowSpec_ = rowSpec_;
  other->spacing_ = spacing_;
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "setSpecsWithBoolean:withNSString:withNSString:", NULL, "V", 0x4, NULL },
    { "isHorizontal", NULL, "Z", 0x1, NULL },
    { "updateFormLayout", NULL, "V", 0x404, NULL },
    { "addFirstComponentWithRAREiPlatformComponent:withNSString:", NULL, "V", 0x4, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "firstComponentAdded_", NULL, 0x0, "Z" },
    { "colSpec_", NULL, 0x4, "LNSString" },
    { "horizontal_", NULL, 0x4, "Z" },
    { "rowSpec_", NULL, 0x4, "LNSString" },
    { "spacing_", NULL, 0x4, "I" },
  };
  static J2ObjcClassInfo _RAREaLinearPanel = { "aLinearPanel", "com.appnativa.rare.ui", NULL, 0x401, 4, methods, 5, fields, 0, NULL};
  return &_RAREaLinearPanel;
}

@end
