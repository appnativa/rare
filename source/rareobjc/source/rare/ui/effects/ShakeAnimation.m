//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Code/Dev/appNativa/source/rareobjc/../rare/apple/com/appnativa/rare/ui/effects/ShakeAnimation.java
//
//  Created by decoteaud on 12/8/15.
//

#include "com/appnativa/rare/ui/effects/ShakeAnimation.h"

@implementation RAREShakeAnimation

- (id)init {
  return [super init];
}

- (void)startExWithId:(id)viewProxy {
  #if TARGET_OS_IPHONE
  UIView* view=(UIView*)viewProxy;
  #else
  NSView* view=(NSView*)viewProxy;
  #endif
  [UIView animateKeyframesWithDuration:0.5 delay:0.0 options:0 animations:^{
    [UIView setAnimationCurve:UIViewAnimationCurveLinear];
    
    NSInteger repeatCount = 8;
    NSTimeInterval duration = 1.0 / (NSTimeInterval)repeatCount;
    
    for (NSInteger i = 0; i < repeatCount; i++) {
      [UIView addKeyframeWithRelativeStartTime:i * duration relativeDuration:duration animations:^{
        CGFloat dx = 5.0;
        if (i == repeatCount - 1) {
          view.transform = CGAffineTransformIdentity;
        } else if (i % 2) {
          view.transform = CGAffineTransformTranslate(CGAffineTransformIdentity, -dx, 0.0);
        } else {
          view.transform = CGAffineTransformTranslate(CGAffineTransformIdentity, +dx, 0.0);
        }
      }];
    }
  } completion: ^(BOOL finished) {
    [self animationEndedWithRAREiPlatformAnimator: self];
  }];
  
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "startExWithId:", NULL, "V", 0x104, NULL },
  };
  static J2ObjcClassInfo _RAREShakeAnimation = { "ShakeAnimation", "com.appnativa.rare.ui.effects", NULL, 0x1, 1, methods, 0, NULL, 0, NULL};
  return &_RAREShakeAnimation;
}

@end
