//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Code/Dev/appNativa/source/rareobjc/../rare/core/com/appnativa/rare/ui/effects/CompoundAnimation.java
//
//  Created by decoteaud on 9/15/15.
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "com/appnativa/rare/ui/effects/CompoundAnimation.h"
#include "com/appnativa/rare/ui/effects/aAnimator.h"
#include "com/appnativa/rare/ui/effects/iPlatformAnimator.h"
#include "com/appnativa/rare/ui/iPlatformComponent.h"
#include "java/lang/Boolean.h"
#include "java/util/ArrayList.h"
#include "java/util/List.h"

@implementation RARECompoundAnimation

- (id)init {
  return [self initRARECompoundAnimationWithBoolean:NO];
}

- (id)initRARECompoundAnimationWithBoolean:(BOOL)serial {
  if (self = [super init]) {
    animations_ = [[JavaUtilArrayList alloc] initWithInt:3];
    self->serial_ = serial;
  }
  return self;
}

- (id)initWithBoolean:(BOOL)serial {
  return [self initRARECompoundAnimationWithBoolean:serial];
}

- (id)initWithBoolean:(BOOL)serial
withRAREiPlatformAnimatorArray:(IOSObjectArray *)animations {
  if (self = [super init]) {
    animations_ = [[JavaUtilArrayList alloc] initWithInt:3];
    self->serial_ = serial;
    if (animations != nil) {
      {
        IOSObjectArray *a__ = animations;
        id const *b__ = a__->buffer_;
        id const *e__ = b__ + a__->size_;
        while (b__ < e__) {
          id<RAREiPlatformAnimator> a = (*b__++);
          [self addAnimationWithRAREiPlatformAnimator:a];
        }
      }
    }
  }
  return self;
}

- (void)addAnimationWithRAREiPlatformAnimator:(id<RAREiPlatformAnimator>)animator {
  [((id<RAREiPlatformAnimator>) nil_chk(animator)) removeListenerWithRAREiAnimatorListener:self];
  [animator addListenerWithRAREiAnimatorListener:self];
  [((id<JavaUtilList>) nil_chk(animations_)) addWithId:animator];
}

- (void)animateWithRAREiPlatformComponent:(id<RAREiPlatformComponent>)c
                                   withId:(id)postAnimateAction {
  self->component_ = c;
  self->postAnimateAction_ = postAnimateAction;
  running_ = YES;
  runCount_ = 0;
  [self notifyListenersWithRAREiPlatformAnimator:self withBoolean:NO];
  if ([((id<JavaUtilList>) nil_chk(animations_)) isEmpty]) {
    [self notifyListenersWithRAREiPlatformAnimator:self withBoolean:YES];
  }
  else {
    if (serial_) {
      [((id<RAREiPlatformAnimator>) nil_chk([animations_ getWithInt:runCount_])) animateWithRAREiPlatformComponent:component_ withId:nil];
    }
    else {
      for (id<RAREiPlatformAnimator> __strong a in animations_) {
        [((id<RAREiPlatformAnimator>) nil_chk(a)) animateWithRAREiPlatformComponent:c withId:nil];
      }
    }
  }
}

- (void)animationEndedWithRAREiPlatformAnimator:(id<RAREiPlatformAnimator>)source {
  runCount_++;
  if (runCount_ >= [((id<JavaUtilList>) nil_chk(animations_)) size]) {
    [self notifyListenersWithRAREiPlatformAnimator:self withBoolean:[((JavaLangBoolean *) nil_chk([JavaLangBoolean getTRUE])) booleanValue]];
  }
  else if (serial_) {
    [((id<RAREiPlatformAnimator>) nil_chk([animations_ getWithInt:runCount_])) animateWithRAREiPlatformComponent:component_ withId:nil];
  }
}

- (void)animationStartedWithRAREiPlatformAnimator:(id<RAREiPlatformAnimator>)source {
}

- (void)dispose {
  for (id<RAREiPlatformAnimator> __strong a in nil_chk(animations_)) {
    [((id<RAREiPlatformAnimator>) nil_chk(a)) dispose];
  }
  [animations_ clear];
  [super dispose];
}

- (void)removeAnimationWithRAREiPlatformAnimator:(id<RAREiPlatformAnimator>)animator {
  [((id<JavaUtilList>) nil_chk(animations_)) removeWithId:animator];
}

- (void)setSerialWithBoolean:(BOOL)serial {
  self->serial_ = serial;
}

- (id<JavaUtilList>)getAnimations {
  return animations_;
}

- (BOOL)isRunning {
  return running_;
}

- (BOOL)isSerial {
  return serial_;
}

- (void)copyAllFieldsTo:(RARECompoundAnimation *)other {
  [super copyAllFieldsTo:other];
  other->animations_ = animations_;
  other->runCount_ = runCount_;
  other->running_ = running_;
  other->serial_ = serial_;
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "initWithBoolean:withRAREiPlatformAnimatorArray:", NULL, NULL, 0x81, NULL },
    { "getAnimations", NULL, "LJavaUtilList", 0x1, NULL },
    { "isRunning", NULL, "Z", 0x1, NULL },
    { "isSerial", NULL, "Z", 0x1, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "animations_", NULL, 0x0, "LJavaUtilList" },
  };
  static J2ObjcClassInfo _RARECompoundAnimation = { "CompoundAnimation", "com.appnativa.rare.ui.effects", NULL, 0x1, 4, methods, 1, fields, 0, NULL};
  return &_RARECompoundAnimation;
}

@end
