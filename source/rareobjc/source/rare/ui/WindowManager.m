//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Code/Dev/appNativa/source/rareobjc/../rare/apple/com/appnativa/rare/ui/WindowManager.java
//
//  Created by decoteaud on 9/15/15.
//

#include "IOSClass.h"
#include "com/appnativa/rare/Platform.h"
#include "com/appnativa/rare/iConstants.h"
#include "com/appnativa/rare/iPlatformAppContext.h"
#include "com/appnativa/rare/platform/PlatformHelper.h"
#include "com/appnativa/rare/platform/apple/AppContext.h"
#include "com/appnativa/rare/platform/apple/ui/view/PopupWindow.h"
#include "com/appnativa/rare/platform/apple/ui/view/Window.h"
#include "com/appnativa/rare/scripting/iScriptHandler.h"
#include "com/appnativa/rare/spot/MainWindow.h"
#include "com/appnativa/rare/spot/Rectangle.h"
#include "com/appnativa/rare/ui/AlertPanel.h"
#include "com/appnativa/rare/ui/ComponentFactory.h"
#include "com/appnativa/rare/ui/Frame.h"
#include "com/appnativa/rare/ui/ScreenUtils.h"
#include "com/appnativa/rare/ui/TitlePane.h"
#include "com/appnativa/rare/ui/WidgetListener.h"
#include "com/appnativa/rare/ui/WindowManager.h"
#include "com/appnativa/rare/ui/aWidgetListener.h"
#include "com/appnativa/rare/ui/aWindowManager.h"
#include "com/appnativa/rare/ui/event/DataEvent.h"
#include "com/appnativa/rare/ui/iPlatformComponent.h"
#include "com/appnativa/rare/ui/iPlatformComponentFactory.h"
#include "com/appnativa/rare/ui/iPopup.h"
#include "com/appnativa/rare/ui/iWindow.h"
#include "com/appnativa/rare/viewer/iContainer.h"
#include "com/appnativa/rare/viewer/iTarget.h"
#include "com/appnativa/rare/viewer/iViewer.h"
#include "com/appnativa/rare/widget/BeanWidget.h"
#include "com/appnativa/rare/widget/iWidget.h"
#include "com/appnativa/spot/SPOTBoolean.h"
#include "java/lang/Throwable.h"
#include "java/util/HashMap.h"
#include "java/util/List.h"
#include "java/util/Map.h"

@implementation RAREWindowManager

- (id)initWithRAREAppContext:(RAREAppContext *)app {
  if (self = [super initWithRAREiPlatformAppContext:app]) {
    if (componentCreator_ == nil) {
      componentCreator_ = [[RAREComponentFactory alloc] init];
      [componentCreator_ setAppContextWithRAREiPlatformAppContext:appContext_];
    }
    mainFrame_ = [[RAREFrame alloc] initWithRAREiPlatformAppContext:app withRAREWindow:[((RAREAppContext *) nil_chk(app)) getPlatformMainWindow]];
    workspaceTarget_ = [[RAREWindowManager_WorkspaceTarget alloc] initWithRAREiPlatformAppContext:app withRAREFrame:(RAREFrame *) check_class_cast(mainFrame_, [RAREFrame class])];
    [((RAREFrame *) check_class_cast(mainFrame_, [RAREFrame class])) setTargetWithRAREiTarget:workspaceTarget_];
    (void) [((JavaUtilHashMap *) nil_chk(theTargets_)) putWithId:[RAREiTarget TARGET_WORKSPACE] withId:workspaceTarget_];
  }
  return self;
}

- (BOOL)supportsMultipleWindowIcons {
  return ![RAREPlatform isIOS];
}

- (void)configureWithRARESPOTMainWindow:(RARESPOTMainWindow *)cfg {
  [self createScriptHandlerWithRARESPOTMainWindow:cfg];
  RAREFrame *frame = (RAREFrame *) check_class_cast(mainFrame_, [RAREFrame class]);
  RAREDataEvent *event = [[RAREDataEvent alloc] initWithId:self withId:cfg];
  (void) [self fireEventWithNSString:[RAREiConstants EVENT_CREATED] withJavaUtilEventObject:event withBoolean:YES];
  [self configureStandardStuffWithRARESPOTMainWindow:cfg];
  if (![((SPOTBoolean *) nil_chk(((RARESPOTMainWindow *) nil_chk(cfg))->decorated_)) booleanValue] || [RAREPlatform isTouchDevice]) {
    id<RAREiWidget> w = [self createTitleWidgetWithRARESPOTMainWindow:cfg];
    if (w != nil) {
      [((RAREFrame *) check_class_cast(mainFrame_, [RAREFrame class])) setTitleWidgetWithRAREiWidget:w];
    }
  }
  RARESPOTRectangle *r = cfg->bounds_;
  int x = [((RARESPOTRectangle *) nil_chk(r)) getXPixels];
  int y = [r getYPixels];
  int w = [r getWidthPixelsWithRAREiPlatformComponent:(id<RAREiPlatformComponent>) check_protocol_cast(mainFrame_, @protocol(RAREiPlatformComponent)) withBoolean:YES];
  int h = [r getHeightPixelsWithRAREiPlatformComponent:(id<RAREiPlatformComponent>) check_protocol_cast(mainFrame_, @protocol(RAREiPlatformComponent)) withBoolean:YES];
  if (![RAREPlatform isIOS]) {
    [RAREScreenUtils centerOnScreenAndSizeWithRAREiWindow:mainFrame_ withFloat:x withFloat:y withFloat:w withFloat:h];
  }
  else {
    if ([((SPOTBoolean *) nil_chk(cfg->showTitleBar_)) spot_hasValue] && [cfg->showTitleBar_ booleanValue] && [((id<RAREiPlatformAppContext>) nil_chk([RAREPlatform getAppContext])) okForOSWithISPOTElement:cfg->showTitleBar_] && (menuBar_ == nil)) {
      if ([((RAREFrame *) nil_chk(frame)) getTitleWidget] == nil) {
        RAREBeanWidget *b = [[RAREBeanWidget alloc] initWithRAREiContainer:[self getRootViewer] withRAREiPlatformComponent:[[RARETitlePane alloc] initWithRAREiWidget:[self getViewer]]];
        [frame setTitleWidgetWithRAREiWidget:b];
      }
    }
  }
  (void) [self fireEventWithNSString:[RAREiConstants EVENT_CONFIGURE] withJavaUtilEventObject:event withBoolean:YES];
}

- (id<RAREiPopup>)createPopupWithRAREiWidget:(id<RAREiWidget>)context {
  id<RAREiPopup> p = [RAREaPlatformHelper createPopupWithBoolean:NO withBoolean:YES];
  [((id<RAREiPopup>) nil_chk(p)) setPopupOwnerWithRAREiPlatformComponent:[((id<RAREiWidget>) nil_chk(context)) getContainerComponent]];
  return p;
}

- (id<RAREiWindow>)createWindowWithRAREiWidget:(id<RAREiWidget>)context
                               withJavaUtilMap:(id<JavaUtilMap>)options {
  RAREFrame *f = [RAREFrame createFromOptionsWithRAREiWidget:context withNSString:nil withJavaUtilMap:options];
  return f;
}

- (id<RAREiWindow>)createWindowWithRAREiWidget:(id<RAREiWidget>)context
                                  withNSString:(NSString *)target
                                  withNSString:(NSString *)title {
  RAREFrame *f = [RAREFrame createWithRAREiWidget:context withNSString:title withNSString:target withBoolean:YES withBoolean:YES];
  return f;
}

- (void)onConfigurationChangedWithBoolean:(BOOL)reset {
  if (([self getWorkspaceViewer] != nil)) {
    [((id<RAREiViewer>) nil_chk([self getWorkspaceViewer])) onConfigurationChangedWithBoolean:reset];
    [((id<RAREiViewer>) nil_chk([self getWorkspaceViewer])) update];
  }
}

- (void)onConfigurationWillChangeWithId:(id)newConfig {
  if (([self getWorkspaceViewer] != nil)) {
    [((id<RAREiViewer>) nil_chk([self getWorkspaceViewer])) onConfigurationWillChangeWithId:newConfig];
  }
}

- (RAREaWidgetListener *)createWidgetListenerWithRAREiWidget:(id<RAREiWidget>)widget
                                             withJavaUtilMap:(id<JavaUtilMap>)map
                                      withRAREiScriptHandler:(id<RAREiScriptHandler>)scriptHandler {
  return [[RAREWidgetListener alloc] initWithRAREiWidget:widget withJavaUtilMap:map withRAREiScriptHandler:scriptHandler];
}

- (void)handleCustomPropertiesWithRARESPOTMainWindow:(RARESPOTMainWindow *)cfg
                                     withJavaUtilMap:(id<JavaUtilMap>)properties {
  [RAREPlatformHelper handleCustomPropertiesWithRARESPOTMainWindow:cfg withJavaUtilMap:properties];
  [super handleCustomPropertiesWithRARESPOTMainWindow:cfg withJavaUtilMap:properties];
}

- (void)showErrorDialogWithJavaLangThrowable:(JavaLangThrowable *)e {
  [RAREAlertPanel showErrorDialogWithJavaLangThrowable:e];
}

- (void)setWindowIconsExWithJavaUtilList:(id<JavaUtilList>)icons {
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "supportsMultipleWindowIcons", NULL, "Z", 0x4, NULL },
    { "createPopupWithRAREiWidget:", NULL, "LRAREiPopup", 0x1, NULL },
    { "createWindowWithRAREiWidget:withJavaUtilMap:", NULL, "LRAREiWindow", 0x1, NULL },
    { "createWindowWithRAREiWidget:withNSString:withNSString:", NULL, "LRAREiWindow", 0x1, NULL },
    { "createWidgetListenerWithRAREiWidget:withJavaUtilMap:withRAREiScriptHandler:", NULL, "LRAREaWidgetListener", 0x4, NULL },
    { "handleCustomPropertiesWithRARESPOTMainWindow:withJavaUtilMap:", NULL, "V", 0x4, NULL },
    { "showErrorDialogWithJavaLangThrowable:", NULL, "V", 0x4, NULL },
    { "setWindowIconsExWithJavaUtilList:", NULL, "V", 0x4, NULL },
  };
  static J2ObjcClassInfo _RAREWindowManager = { "WindowManager", "com.appnativa.rare.ui", NULL, 0x1, 8, methods, 0, NULL, 0, NULL};
  return &_RAREWindowManager;
}

@end
@implementation RAREWindowManager_WorkspaceTarget

- (id)initWithRAREiPlatformAppContext:(id<RAREiPlatformAppContext>)app
                        withRAREFrame:(RAREFrame *)f {
  return [super initWithRAREiPlatformAppContext:app withNSString:[RAREiTarget TARGET_WORKSPACE] withRAREiParentComponent:f withBoolean:NO];
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcClassInfo _RAREWindowManager_WorkspaceTarget = { "WorkspaceTarget", "com.appnativa.rare.ui", "WindowManager", 0x8, 0, NULL, 0, NULL, 0, NULL};
  return &_RAREWindowManager_WorkspaceTarget;
}

@end
