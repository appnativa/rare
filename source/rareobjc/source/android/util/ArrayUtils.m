//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Code/Dev/appNativa/source/rareobjc/../rare/apple/android/util/ArrayUtils.java
//
//  Created by decoteaud on 3/11/16.
//

#include "IOSByteArray.h"
#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "android/util/ArrayUtils.h"
#include "java/lang/System.h"
#include "java/lang/reflect/Array.h"

@implementation AndroidUtilArrayUtils

static IOSObjectArray * AndroidUtilArrayUtils_EMPTY_;
static IOSObjectArray * AndroidUtilArrayUtils_sCache_;

+ (IOSObjectArray *)EMPTY {
  return AndroidUtilArrayUtils_EMPTY_;
}

+ (void)setEMPTY:(IOSObjectArray *)EMPTY {
  AndroidUtilArrayUtils_EMPTY_ = EMPTY;
}

+ (IOSObjectArray *)sCache {
  return AndroidUtilArrayUtils_sCache_;
}

+ (void)setSCache:(IOSObjectArray *)sCache {
  AndroidUtilArrayUtils_sCache_ = sCache;
}

- (id)init {
  return [super init];
}

+ (int)idealByteArraySizeWithInt:(int)need {
  for (int i = 4; i < 32; i++) if (need <= (1 << i) - 12) return (1 << i) - 12;
  return need;
}

+ (int)idealBooleanArraySizeWithInt:(int)need {
  return [AndroidUtilArrayUtils idealByteArraySizeWithInt:need];
}

+ (int)idealShortArraySizeWithInt:(int)need {
  return [AndroidUtilArrayUtils idealByteArraySizeWithInt:need * 2] / 2;
}

+ (int)idealCharArraySizeWithInt:(int)need {
  return [AndroidUtilArrayUtils idealByteArraySizeWithInt:need * 2] / 2;
}

+ (int)idealIntArraySizeWithInt:(int)need {
  return [AndroidUtilArrayUtils idealByteArraySizeWithInt:need * 4] / 4;
}

+ (int)idealFloatArraySizeWithInt:(int)need {
  return [AndroidUtilArrayUtils idealByteArraySizeWithInt:need * 4] / 4;
}

+ (int)idealObjectArraySizeWithInt:(int)need {
  return [AndroidUtilArrayUtils idealByteArraySizeWithInt:need * 4] / 4;
}

+ (int)idealLongArraySizeWithInt:(int)need {
  return [AndroidUtilArrayUtils idealByteArraySizeWithInt:need * 8] / 8;
}

+ (BOOL)equalsWithByteArray:(IOSByteArray *)array1
              withByteArray:(IOSByteArray *)array2
                    withInt:(int)length {
  if (array1 == array2) {
    return YES;
  }
  if (array1 == nil || array2 == nil || (int) [array1 count] < length || (int) [array2 count] < length) {
    return NO;
  }
  for (int i = 0; i < length; i++) {
    if (IOSByteArray_Get(nil_chk(array1), i) != IOSByteArray_Get(nil_chk(array2), i)) {
      return NO;
    }
  }
  return YES;
}

+ (IOSObjectArray *)emptyArrayWithIOSClass:(IOSClass *)kind {
  if (kind == [IOSClass classWithClass:[NSObject class]]) {
    return (IOSObjectArray *) check_class_cast(AndroidUtilArrayUtils_EMPTY_, [IOSObjectArray class]);
  }
  int bucket = (([JavaLangSystem identityHashCodeWithId:kind] / 8) & (int) 0x7FFFFFFF) % AndroidUtilArrayUtils_CACHE_SIZE;
  id cache = IOSObjectArray_Get(nil_chk(AndroidUtilArrayUtils_sCache_), bucket);
  if (cache == nil || [[cache getClass] getComponentType] != kind) {
    cache = [JavaLangReflectArray newInstanceWithIOSClass:kind withInt:0];
    (void) IOSObjectArray_Set(AndroidUtilArrayUtils_sCache_, bucket, cache);
  }
  return (IOSObjectArray *) check_class_cast(cache, [IOSObjectArray class]);
}

+ (BOOL)containsWithNSObjectArray:(IOSObjectArray *)array
                           withId:(id)value {
  {
    IOSObjectArray *a__ = array;
    id const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    id const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      id element = (*b__++);
      if (element == nil) {
        if (value == nil) return YES;
      }
      else {
        if (value != nil && [element isEqual:value]) return YES;
      }
    }
  }
  return NO;
}

+ (void)initialize {
  if (self == [AndroidUtilArrayUtils class]) {
    AndroidUtilArrayUtils_EMPTY_ = [IOSObjectArray arrayWithLength:0 type:[IOSClass classWithClass:[NSObject class]]];
    AndroidUtilArrayUtils_sCache_ = [IOSObjectArray arrayWithLength:AndroidUtilArrayUtils_CACHE_SIZE type:[IOSClass classWithClass:[NSObject class]]];
  }
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "init", NULL, NULL, 0x2, NULL },
    { "equalsWithByteArray:withByteArray:withInt:", NULL, "Z", 0x9, NULL },
    { "emptyArrayWithIOSClass:", NULL, "LIOSObjectArray", 0x9, NULL },
    { "containsWithNSObjectArray:withId:", NULL, "Z", 0x9, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "EMPTY_", NULL, 0xa, "LIOSObjectArray" },
    { "CACHE_SIZE_", NULL, 0x1a, "I" },
    { "sCache_", NULL, 0xa, "LIOSObjectArray" },
  };
  static J2ObjcClassInfo _AndroidUtilArrayUtils = { "ArrayUtils", "android.util", NULL, 0x1, 4, methods, 3, fields, 0, NULL};
  return &_AndroidUtilArrayUtils;
}

@end
