//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Code/Dev/appNativa/source/rareobjc/../util/src/com/appnativa/util/UTF8Helper.java
//
//  Created by decoteaud on 3/11/16.
//

#include "IOSByteArray.h"
#include "IOSCharArray.h"
#include "com/appnativa/util/ByteArray.h"
#include "com/appnativa/util/CharArray.h"
#include "com/appnativa/util/ISO88591Helper.h"
#include "com/appnativa/util/UTF8Helper.h"
#include "com/appnativa/util/iCharsetHelper.h"
#include "java/lang/ThreadLocal.h"
#include "java/nio/charset/Charset.h"

@implementation RAREUTUTF8Helper

static JavaNioCharsetCharset * RAREUTUTF8Helper_utf8Charset_;
static JavaLangThreadLocal * RAREUTUTF8Helper_perThreadInstance_;
static JavaLangThreadLocal * RAREUTUTF8Helper_perThreadCharArray_;
static JavaLangThreadLocal * RAREUTUTF8Helper_perThreadByteArray_;

+ (JavaNioCharsetCharset *)utf8Charset {
  return RAREUTUTF8Helper_utf8Charset_;
}

+ (void)setUtf8Charset:(JavaNioCharsetCharset *)utf8Charset {
  RAREUTUTF8Helper_utf8Charset_ = utf8Charset;
}

+ (JavaLangThreadLocal *)perThreadInstance {
  return RAREUTUTF8Helper_perThreadInstance_;
}

+ (void)setPerThreadInstance:(JavaLangThreadLocal *)perThreadInstance {
  RAREUTUTF8Helper_perThreadInstance_ = perThreadInstance;
}

+ (JavaLangThreadLocal *)perThreadCharArray {
  return RAREUTUTF8Helper_perThreadCharArray_;
}

+ (void)setPerThreadCharArray:(JavaLangThreadLocal *)perThreadCharArray {
  RAREUTUTF8Helper_perThreadCharArray_ = perThreadCharArray;
}

+ (JavaLangThreadLocal *)perThreadByteArray {
  return RAREUTUTF8Helper_perThreadByteArray_;
}

+ (void)setPerThreadByteArray:(JavaLangThreadLocal *)perThreadByteArray {
  RAREUTUTF8Helper_perThreadByteArray_ = perThreadByteArray;
}

- (id)init {
  return [super initWithJavaNioCharsetCharset:RAREUTUTF8Helper_utf8Charset_];
}

- (id<RAREUTiCharsetHelper>)copy__ {
  return [[RAREUTUTF8Helper alloc] init];
}

+ (NSString *)utf8StringWithNSString:(NSString *)value {
  if ((value == nil) || ([value sequenceLength] == 0)) {
    return value;
  }
  RAREUTCharArray *ca = (RAREUTCharArray *) check_class_cast([((JavaLangThreadLocal *) nil_chk(RAREUTUTF8Helper_perThreadCharArray_)) get], [RAREUTCharArray class]);
  RAREUTByteArray *ba = (RAREUTByteArray *) check_class_cast([((JavaLangThreadLocal *) nil_chk(RAREUTUTF8Helper_perThreadByteArray_)) get], [RAREUTByteArray class]);
  (void) [((RAREUTCharArray *) nil_chk(ca)) setWithNSString:value];
  ((RAREUTByteArray *) nil_chk(ba))->_length_ = [((RAREUTUTF8Helper *) nil_chk([RAREUTUTF8Helper getInstance])) getBytesWithCharArray:ca->A_ withInt:0 withInt:ca->_length_ withRAREUTByteArray:ba withInt:0];
  ca->_length_ = 0;
  (void) [ba getCharsWithRAREUTCharArray:ca withRAREUTiCharsetHelper:[RAREUTISO88591Helper getInstance]];
  NSString *s = [ca description];
  if ((int) [((IOSCharArray *) nil_chk(ca->A_)) count] > 65538) {
    ca->_length_ = 256;
    [ca trimToSize];
  }
  if ((int) [((IOSByteArray *) nil_chk(ba->A_)) count] > 65538) {
    ba->_length_ = 256;
    [ba trimToSize];
  }
  return s;
}

+ (RAREUTUTF8Helper *)getInstance {
  return (RAREUTUTF8Helper *) check_class_cast([((JavaLangThreadLocal *) nil_chk(RAREUTUTF8Helper_perThreadInstance_)) get], [RAREUTUTF8Helper class]);
}

+ (void)initialize {
  if (self == [RAREUTUTF8Helper class]) {
    {
      RAREUTUTF8Helper_utf8Charset_ = [JavaNioCharsetCharset forNameWithNSString:@"utf-8"];
    }
    RAREUTUTF8Helper_perThreadInstance_ = [[RAREUTUTF8Helper_$1 alloc] init];
    RAREUTUTF8Helper_perThreadCharArray_ = [[RAREUTUTF8Helper_$2 alloc] init];
    RAREUTUTF8Helper_perThreadByteArray_ = [[RAREUTUTF8Helper_$3 alloc] init];
  }
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "init", NULL, NULL, 0x2, NULL },
    { "copy__", NULL, "LRAREUTiCharsetHelper", 0x1, NULL },
    { "utf8StringWithNSString:", NULL, "LNSString", 0x9, NULL },
    { "getInstance", NULL, "LRAREUTUTF8Helper", 0x9, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "utf8Charset_", NULL, 0x9, "LJavaNioCharsetCharset" },
    { "perThreadInstance_", NULL, 0xa, "LJavaLangThreadLocal" },
    { "perThreadCharArray_", NULL, 0xa, "LJavaLangThreadLocal" },
    { "perThreadByteArray_", NULL, 0xa, "LJavaLangThreadLocal" },
  };
  static J2ObjcClassInfo _RAREUTUTF8Helper = { "UTF8Helper", "com.appnativa.util", NULL, 0x11, 4, methods, 4, fields, 0, NULL};
  return &_RAREUTUTF8Helper;
}

@end
@implementation RAREUTUTF8Helper_$1

- (id)initialValue {
  @synchronized(self) {
    {
      return [[RAREUTUTF8Helper alloc] init];
    }
  }
}

- (id)init {
  return [super init];
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "initialValue", NULL, "LNSObject", 0x24, NULL },
  };
  static J2ObjcClassInfo _RAREUTUTF8Helper_$1 = { "$1", "com.appnativa.util", "UTF8Helper", 0x8000, 1, methods, 0, NULL, 0, NULL};
  return &_RAREUTUTF8Helper_$1;
}

@end
@implementation RAREUTUTF8Helper_$2

- (id)initialValue {
  @synchronized(self) {
    {
      return [[RAREUTCharArray alloc] init];
    }
  }
}

- (id)init {
  return [super init];
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "initialValue", NULL, "LNSObject", 0x24, NULL },
  };
  static J2ObjcClassInfo _RAREUTUTF8Helper_$2 = { "$2", "com.appnativa.util", "UTF8Helper", 0x8000, 1, methods, 0, NULL, 0, NULL};
  return &_RAREUTUTF8Helper_$2;
}

@end
@implementation RAREUTUTF8Helper_$3

- (id)initialValue {
  @synchronized(self) {
    {
      return [[RAREUTByteArray alloc] init];
    }
  }
}

- (id)init {
  return [super init];
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "initialValue", NULL, "LNSObject", 0x24, NULL },
  };
  static J2ObjcClassInfo _RAREUTUTF8Helper_$3 = { "$3", "com.appnativa.util", "UTF8Helper", 0x8000, 1, methods, 0, NULL, 0, NULL};
  return &_RAREUTUTF8Helper_$3;
}

@end
